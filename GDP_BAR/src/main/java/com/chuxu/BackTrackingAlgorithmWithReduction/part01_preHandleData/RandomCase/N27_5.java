package com.chuxu.BackTrackingAlgorithmWithReduction.part01_preHandleData.RandomCase;

import com.chuxu.entity.Facility;

import java.text.DecimalFormat;
import java.util.Arrays;
import java.util.LinkedHashSet;

public class N27_5 {
    public static int dimension = 27;
    public static final double[] ci =
            {901.0, 238.0, 379.0, 714.0, 864.0, 792.0, 605.0, 463.0, 651.0, 106.0, 903.0, 429.0, 755.0, 491.0, 761.0, 492.0, 178.0, 942.0, 962.0, 961.0, 154.0, 460.0, 454.0, 670.0, 887.0, 246.0, 762.0};
    public static final double[] pi =
            {501.0, 394.0, 203.0, 971.0, 811.0, 891.0, 482.0, 271.0, 352.0, 969.0, 381.0, 786.0, 552.0, 526.0, 720.0, 735.0, 611.0, 938.0, 527.0, 958.0, 637.0, 699.0, 490.0, 330.0, 211.0, 847.0, 637.0};
    public static final LinkedHashSet<Facility> V = new LinkedHashSet<>();
    public static double[][] disMatrix = {
            {0.00, 103.84, 186.50, 86.47, 99.23, 176.40, 90.80, 135.69, 101.31, 115.80, 152.58, 85.63, 171.85, 134.03, 163.75, 183.63, 155.17, 134.26, 109.11, 127.97, 160.18, 157.88, 86.23, 114.26, 135.21, 190.45, 137.20},
            {103.84, 0.00, 138.08, 170.58, 94.79, 146.18, 122.59, 88.10, 194.32, 157.63, 196.55, 154.77, 177.43, 176.02, 177.94, 120.55, 176.29, 156.72, 142.62, 185.90, 168.68, 90.96, 154.81, 114.76, 101.43, 184.08, 127.57},
            {186.50, 138.08, 0.00, 82.15, 176.76, 87.10, 166.74, 182.75, 100.40, 85.47, 150.55, 148.17, 160.50, 117.17, 109.61, 165.04, 191.37, 163.53, 118.68, 154.94, 93.93, 92.07, 91.33, 109.31, 157.02, 149.49, 82.94},
            {86.47, 170.58, 82.15, 0.00, 188.52, 149.30, 125.98, 94.50, 94.32, 150.99, 138.76, 91.79, 188.04, 168.00, 173.12, 128.82, 194.65, 117.94, 93.37, 94.07, 183.54, 118.28, 114.15, 119.96, 91.75, 101.34, 184.22},
            {99.23, 94.79, 176.76, 188.52, 0.00, 112.99, 154.11, 149.22, 180.07, 131.57, 146.71, 183.42, 196.23, 102.86, 136.63, 80.14, 191.72, 107.22, 140.20, 151.26, 89.11, 130.41, 165.88, 114.54, 82.72, 148.91, 195.22},
            {176.40, 146.18, 87.10, 149.30, 112.99, 0.00, 93.47, 117.01, 112.21, 136.15, 157.94, 123.93, 98.97, 147.86, 161.47, 139.76, 170.11, 185.10, 188.75, 137.34, 101.91, 141.78, 159.72, 188.88, 176.33, 190.21, 81.41},
            {90.80, 122.59, 166.74, 125.98, 154.11, 93.47, 0.00, 137.34, 133.12, 91.71, 139.11, 181.16, 89.87, 118.22, 191.00, 187.44, 111.03, 131.56, 197.66, 182.93, 196.08, 118.25, 198.65, 170.22, 199.42, 112.54, 122.78},
            {135.69, 88.10, 182.75, 94.50, 149.22, 117.01, 137.34, 0.00, 137.81, 150.99, 118.80, 106.77, 198.73, 96.77, 86.77, 139.40, 161.09, 82.21, 159.30, 103.48, 147.08, 99.11, 141.83, 97.98, 133.64, 188.05, 196.61},
            {101.31, 194.32, 100.40, 94.32, 180.07, 112.21, 133.12, 137.81, 0.00, 125.40, 168.32, 153.34, 141.83, 106.88, 118.20, 106.63, 196.93, 98.04, 137.51, 107.56, 80.26, 123.07, 151.29, 196.65, 153.55, 182.97, 188.07},
            {115.80, 157.63, 85.47, 150.99, 131.57, 136.15, 91.71, 150.99, 125.40, 0.00, 195.23, 100.30, 125.58, 153.38, 181.61, 181.01, 151.04, 99.15, 99.83, 107.96, 125.73, 130.55, 119.10, 146.10, 150.79, 122.27, 136.77},
            {152.58, 196.55, 150.55, 138.76, 146.71, 157.94, 139.11, 118.80, 168.32, 195.23, 0.00, 133.47, 138.63, 150.54, 166.97, 126.07, 131.39, 104.95, 199.22, 106.52, 149.80, 85.99, 88.06, 134.70, 129.20, 159.46, 184.66},
            {85.63, 154.77, 148.17, 91.79, 183.42, 123.93, 181.16, 106.77, 153.34, 100.30, 133.47, 0.00, 140.70, 141.48, 108.19, 185.21, 106.50, 177.29, 154.59, 128.77, 172.66, 152.64, 183.86, 108.23, 199.71, 186.98, 138.45},
            {171.85, 177.43, 160.50, 188.04, 196.23, 98.97, 89.87, 198.73, 141.83, 125.58, 138.63, 140.70, 0.00, 103.48, 111.47, 136.96, 98.40, 164.66, 188.36, 180.84, 110.18, 85.79, 123.63, 133.00, 118.18, 195.89, 104.10},
            {134.03, 176.02, 117.17, 168.00, 102.86, 147.86, 118.22, 96.77, 106.88, 153.38, 150.54, 141.48, 103.48, 0.00, 86.13, 108.67, 154.19, 109.17, 90.85, 155.04, 110.53, 117.99, 128.10, 176.13, 199.28, 94.39, 169.28},
            {163.75, 177.94, 109.61, 173.12, 136.63, 161.47, 191.00, 86.77, 118.20, 181.61, 166.97, 108.19, 111.47, 86.13, 0.00, 126.04, 196.53, 82.95, 132.19, 144.59, 165.49, 176.58, 187.90, 151.16, 84.00, 147.27, 154.56},
            {183.63, 120.55, 165.04, 128.82, 80.14, 139.76, 187.44, 139.40, 106.63, 181.01, 126.07, 185.21, 136.96, 108.67, 126.04, 0.00, 183.24, 190.36, 126.40, 188.28, 102.20, 180.33, 159.55, 89.95, 194.51, 158.32, 103.08},
            {155.17, 176.29, 191.37, 194.65, 191.72, 170.11, 111.03, 161.09, 196.93, 151.04, 131.39, 106.50, 98.40, 154.19, 196.53, 183.24, 0.00, 128.37, 85.67, 189.25, 175.70, 136.20, 137.06, 135.65, 128.25, 124.47, 112.74},
            {134.26, 156.72, 163.53, 117.94, 107.22, 185.10, 131.56, 82.21, 98.04, 99.15, 104.95, 177.29, 164.66, 109.17, 82.95, 190.36, 128.37, 0.00, 155.74, 88.31, 184.72, 143.42, 183.18, 193.58, 164.92, 119.17, 148.40},
            {109.11, 142.62, 118.68, 93.37, 140.20, 188.75, 197.66, 159.30, 137.51, 99.83, 199.22, 154.59, 188.36, 90.85, 132.19, 126.40, 85.67, 155.74, 0.00, 149.05, 195.91, 170.40, 113.68, 147.91, 169.67, 88.13, 120.90},
            {127.97, 185.90, 154.94, 94.07, 151.26, 137.34, 182.93, 103.48, 107.56, 107.96, 106.52, 128.77, 180.84, 155.04, 144.59, 188.28, 189.25, 88.31, 149.05, 0.00, 104.34, 169.01, 150.19, 150.49, 99.17, 100.11, 179.07},
            {160.18, 168.68, 93.93, 183.54, 89.11, 101.91, 196.08, 147.08, 80.26, 125.73, 149.80, 172.66, 110.18, 110.53, 165.49, 102.20, 175.70, 184.72, 195.91, 104.34, 0.00, 84.52, 94.90, 145.40, 80.11, 114.16, 176.74},
            {157.88, 90.96, 92.07, 118.28, 130.41, 141.78, 118.25, 99.11, 123.07, 130.55, 85.99, 152.64, 85.79, 117.99, 176.58, 180.33, 136.20, 143.42, 170.40, 169.01, 84.52, 0.00, 93.22, 195.37, 153.12, 139.74, 114.66},
            {86.23, 154.81, 91.33, 114.15, 165.88, 159.72, 198.65, 141.83, 151.29, 119.10, 88.06, 183.86, 123.63, 128.10, 187.90, 159.55, 137.06, 183.18, 113.68, 150.19, 94.90, 93.22, 0.00, 118.97, 193.89, 89.49, 144.30},
            {114.26, 114.76, 109.31, 119.96, 114.54, 188.88, 170.22, 97.98, 196.65, 146.10, 134.70, 108.23, 133.00, 176.13, 151.16, 89.95, 135.65, 193.58, 147.91, 150.49, 145.40, 195.37, 118.97, 0.00, 153.88, 172.57, 94.74},
            {135.21, 101.43, 157.02, 91.75, 82.72, 176.33, 199.42, 133.64, 153.55, 150.79, 129.20, 199.71, 118.18, 199.28, 84.00, 194.51, 128.25, 164.92, 169.67, 99.17, 80.11, 153.12, 193.89, 153.88, 0.00, 82.63, 188.05},
            {190.45, 184.08, 149.49, 101.34, 148.91, 190.21, 112.54, 188.05, 182.97, 122.27, 159.46, 186.98, 195.89, 94.39, 147.27, 158.32, 124.47, 119.17, 88.13, 100.11, 114.16, 139.74, 89.49, 172.57, 82.63, 0.00, 150.32},
            {137.20, 127.57, 82.94, 184.22, 195.22, 81.41, 122.78, 196.61, 188.07, 136.77, 184.66, 138.45, 104.10, 169.28, 154.56, 103.08, 112.74, 148.40, 120.90, 179.07, 176.74, 114.66, 144.30, 94.74, 188.05, 150.32, 0.00},
    };
    public static final double φp = 0.3;  //本例中都取0.2是会得到性质7疯狂降阶的情况，然后通过性质4直接得到了最优解
    public static final double φc = 0.3;
    public static double P;
    public static double C;

    public static void main(String[] args) {
        preHandle();
    }

    public static void preHandle() {
        DecimalFormat decimalFormat = new DecimalFormat("#.00");
        P = Arrays.stream(pi).reduce(0.0, Double::sum) * φp;
        C = Arrays.stream(ci).reduce(0.0, Double::sum) * φc;
        P = Double.parseDouble(decimalFormat.format(P));
        C = Double.parseDouble(decimalFormat.format(C));
        System.out.println("P = " + P);
        System.out.println("C = " + C);
        for (int i = 0; i < pi.length; i++) {
            V.add(new Facility(i + 1, ci[i], pi[i], pi[i] / ci[i]));
        }
    }
}
