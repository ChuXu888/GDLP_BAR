package com.chuxu.BackTrackingAlgorithmWithReduction.part01_preHandleData.RandomCase;

import com.chuxu.entity.Facility;

import java.text.DecimalFormat;
import java.util.Arrays;
import java.util.LinkedHashSet;

public class N27_4 {
    public static int dimension = 27;
    public static final double[] ci =
            {658.0, 416.0, 989.0, 862.0, 301.0, 672.0, 207.0, 244.0, 968.0, 620.0, 784.0, 396.0, 527.0, 572.0, 509.0, 157.0, 966.0, 128.0, 279.0, 164.0, 436.0, 326.0, 923.0, 238.0, 470.0, 696.0, 149.0};
    public static final double[] pi =
            {139.0, 484.0, 843.0, 956.0, 771.0, 169.0, 917.0, 416.0, 410.0, 570.0, 778.0, 481.0, 582.0, 955.0, 832.0, 190.0, 704.0, 755.0, 892.0, 765.0, 306.0, 590.0, 106.0, 438.0, 311.0, 176.0, 463.0};
    public static final LinkedHashSet<Facility> V = new LinkedHashSet<>();
    public static double[][] disMatrix = {
            {0.00, 86.14, 96.99, 181.46, 132.11, 88.16, 125.17, 80.81, 183.91, 153.74, 83.50, 142.80, 101.99, 161.41, 96.13, 191.10, 138.61, 157.18, 138.70, 132.73, 175.15, 111.57, 176.43, 187.47, 131.44, 169.11, 161.97},
            {86.14, 0.00, 116.60, 161.89, 135.27, 149.81, 108.84, 160.23, 159.86, 140.47, 107.00, 198.02, 83.44, 187.01, 158.35, 168.33, 114.58, 180.44, 125.02, 96.74, 121.09, 137.52, 197.58, 195.88, 87.18, 105.76, 195.97},
            {96.99, 116.60, 0.00, 177.60, 170.90, 95.09, 136.06, 118.54, 172.92, 184.26, 188.77, 100.59, 177.59, 92.46, 80.33, 196.34, 171.16, 132.32, 178.24, 183.20, 139.65, 170.91, 96.81, 85.96, 180.25, 178.12, 119.54},
            {181.46, 161.89, 177.60, 0.00, 108.50, 85.18, 179.87, 192.55, 119.15, 155.98, 194.04, 173.89, 162.25, 198.50, 132.25, 188.27, 160.41, 95.62, 138.80, 174.86, 86.83, 134.44, 170.87, 147.73, 146.83, 139.02, 159.53},
            {132.11, 135.27, 170.90, 108.50, 0.00, 114.48, 150.21, 186.76, 191.49, 137.82, 83.04, 148.60, 174.62, 198.31, 177.70, 167.60, 157.91, 163.42, 174.32, 159.96, 107.42, 128.67, 124.61, 164.69, 134.53, 191.37, 130.79},
            {88.16, 149.81, 95.09, 85.18, 114.48, 0.00, 124.80, 171.58, 185.38, 157.72, 172.88, 172.01, 87.72, 185.61, 157.81, 158.36, 103.11, 163.45, 186.90, 91.30, 162.52, 160.21, 129.40, 186.26, 174.60, 190.94, 91.92},
            {125.17, 108.84, 136.06, 179.87, 150.21, 124.80, 0.00, 81.66, 166.26, 139.58, 115.84, 123.78, 158.97, 127.69, 158.71, 178.07, 132.33, 110.39, 128.61, 85.36, 124.30, 175.99, 100.11, 193.50, 129.62, 145.13, 94.63},
            {80.81, 160.23, 118.54, 192.55, 186.76, 171.58, 81.66, 0.00, 111.33, 183.82, 128.01, 195.47, 151.49, 99.46, 105.15, 129.15, 172.08, 194.72, 147.45, 99.89, 94.65, 141.24, 145.46, 92.94, 107.06, 159.05, 155.84},
            {183.91, 159.86, 172.92, 119.15, 191.49, 185.38, 166.26, 111.33, 0.00, 104.85, 94.27, 80.79, 94.48, 95.60, 99.08, 175.68, 111.42, 167.06, 116.83, 185.80, 131.55, 156.61, 154.27, 142.75, 138.50, 92.14, 152.63},
            {153.74, 140.47, 184.26, 155.98, 137.82, 157.72, 139.58, 183.82, 104.85, 0.00, 122.56, 175.16, 145.87, 88.30, 159.67, 95.37, 90.00, 82.14, 118.06, 104.97, 195.49, 109.20, 88.01, 118.66, 108.45, 105.50, 161.92},
            {83.50, 107.00, 188.77, 194.04, 83.04, 172.88, 115.84, 128.01, 94.27, 122.56, 0.00, 90.57, 124.49, 197.38, 120.40, 112.14, 101.92, 190.62, 192.14, 89.79, 168.19, 113.25, 156.73, 137.95, 181.93, 145.38, 159.00},
            {142.80, 198.02, 100.59, 173.89, 148.60, 172.01, 123.78, 195.47, 80.79, 175.16, 90.57, 0.00, 129.80, 173.95, 92.87, 136.85, 98.19, 106.04, 149.42, 91.35, 133.75, 94.97, 162.15, 148.92, 124.85, 111.97, 170.91},
            {101.99, 83.44, 177.59, 162.25, 174.62, 87.72, 158.97, 151.49, 94.48, 145.87, 124.49, 129.80, 0.00, 199.41, 125.94, 84.00, 110.11, 122.78, 126.07, 93.72, 83.84, 118.41, 118.68, 198.45, 151.60, 147.40, 86.70},
            {161.41, 187.01, 92.46, 198.50, 198.31, 185.61, 127.69, 99.46, 95.60, 88.30, 197.38, 173.95, 199.41, 0.00, 146.28, 171.27, 147.21, 93.53, 118.89, 179.90, 81.71, 111.08, 135.65, 169.98, 166.16, 160.11, 152.39},
            {96.13, 158.35, 80.33, 132.25, 177.70, 157.81, 158.71, 105.15, 99.08, 159.67, 120.40, 92.87, 125.94, 146.28, 0.00, 99.86, 158.03, 186.06, 181.06, 82.12, 108.39, 165.33, 142.63, 161.80, 107.33, 152.21, 125.87},
            {191.10, 168.33, 196.34, 188.27, 167.60, 158.36, 178.07, 129.15, 175.68, 95.37, 112.14, 136.85, 84.00, 171.27, 99.86, 0.00, 129.10, 128.76, 96.08, 138.39, 126.89, 125.41, 161.19, 184.05, 133.44, 84.74, 128.26},
            {138.61, 114.58, 171.16, 160.41, 157.91, 103.11, 132.33, 172.08, 111.42, 90.00, 101.92, 98.19, 110.11, 147.21, 158.03, 129.10, 0.00, 102.15, 84.22, 189.45, 127.25, 178.89, 83.81, 133.33, 165.22, 170.58, 130.28},
            {157.18, 180.44, 132.32, 95.62, 163.42, 163.45, 110.39, 194.72, 167.06, 82.14, 190.62, 106.04, 122.78, 93.53, 186.06, 128.76, 102.15, 0.00, 143.96, 190.79, 100.60, 188.96, 198.31, 178.53, 128.50, 111.16, 125.37},
            {138.70, 125.02, 178.24, 138.80, 174.32, 186.90, 128.61, 147.45, 116.83, 118.06, 192.14, 149.42, 126.07, 118.89, 181.06, 96.08, 84.22, 143.96, 0.00, 162.09, 179.70, 195.83, 172.09, 174.00, 148.26, 177.93, 84.60},
            {132.73, 96.74, 183.20, 174.86, 159.96, 91.30, 85.36, 99.89, 185.80, 104.97, 89.79, 91.35, 93.72, 179.90, 82.12, 138.39, 189.45, 190.79, 162.09, 0.00, 142.93, 142.66, 177.38, 106.21, 196.04, 195.95, 175.79},
            {175.15, 121.09, 139.65, 86.83, 107.42, 162.52, 124.30, 94.65, 131.55, 195.49, 168.19, 133.75, 83.84, 81.71, 108.39, 126.89, 127.25, 100.60, 179.70, 142.93, 0.00, 196.71, 114.34, 106.77, 105.61, 154.93, 93.21},
            {111.57, 137.52, 170.91, 134.44, 128.67, 160.21, 175.99, 141.24, 156.61, 109.20, 113.25, 94.97, 118.41, 111.08, 165.33, 125.41, 178.89, 188.96, 195.83, 142.66, 196.71, 0.00, 96.52, 117.35, 136.82, 148.24, 80.77},
            {176.43, 197.58, 96.81, 170.87, 124.61, 129.40, 100.11, 145.46, 154.27, 88.01, 156.73, 162.15, 118.68, 135.65, 142.63, 161.19, 83.81, 198.31, 172.09, 177.38, 114.34, 96.52, 0.00, 115.26, 185.95, 117.99, 119.13},
            {187.47, 195.88, 85.96, 147.73, 164.69, 186.26, 193.50, 92.94, 142.75, 118.66, 137.95, 148.92, 198.45, 169.98, 161.80, 184.05, 133.33, 178.53, 174.00, 106.21, 106.77, 117.35, 115.26, 0.00, 180.58, 151.74, 171.06},
            {131.44, 87.18, 180.25, 146.83, 134.53, 174.60, 129.62, 107.06, 138.50, 108.45, 181.93, 124.85, 151.60, 166.16, 107.33, 133.44, 165.22, 128.50, 148.26, 196.04, 105.61, 136.82, 185.95, 180.58, 0.00, 108.04, 153.57},
            {169.11, 105.76, 178.12, 139.02, 191.37, 190.94, 145.13, 159.05, 92.14, 105.50, 145.38, 111.97, 147.40, 160.11, 152.21, 84.74, 170.58, 111.16, 177.93, 195.95, 154.93, 148.24, 117.99, 151.74, 108.04, 0.00, 82.52},
            {161.97, 195.97, 119.54, 159.53, 130.79, 91.92, 94.63, 155.84, 152.63, 161.92, 159.00, 170.91, 86.70, 152.39, 125.87, 128.26, 130.28, 125.37, 84.60, 175.79, 93.21, 80.77, 119.13, 171.06, 153.57, 82.52, 0.00},
    };
    public static final double φp = 0.3;  //本例中都取0.2是会得到性质7疯狂降阶的情况，然后通过性质4直接得到了最优解
    public static final double φc = 0.3;
    public static double P;
    public static double C;

    public static void main(String[] args) {
        preHandle();
    }

    public static void preHandle() {
        DecimalFormat decimalFormat = new DecimalFormat("#.00");
        P = Arrays.stream(pi).reduce(0.0, Double::sum) * φp;
        C = Arrays.stream(ci).reduce(0.0, Double::sum) * φc;
        P = Double.parseDouble(decimalFormat.format(P));
        C = Double.parseDouble(decimalFormat.format(C));
        System.out.println("P = " + P);
        System.out.println("C = " + C);
        for (int i = 0; i < pi.length; i++) {
            V.add(new Facility(i + 1, ci[i], pi[i], pi[i] / ci[i]));
        }
    }
}
