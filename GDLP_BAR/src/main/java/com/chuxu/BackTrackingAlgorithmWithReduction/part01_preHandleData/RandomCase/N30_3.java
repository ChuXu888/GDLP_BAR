package com.chuxu.BackTrackingAlgorithmWithReduction.part01_preHandleData.RandomCase;

import com.chuxu.entity.Facility;

import java.text.DecimalFormat;
import java.util.Arrays;
import java.util.LinkedHashSet;

public class N30_3 {
    public static int dimension = 30;
    public static final double[] ci =
            {564.0, 206.0, 870.0, 268.0, 1032.0, 264.0, 254.0, 1197.0, 366.0, 211.0, 369.0, 306.0, 846.0, 315.0, 1093.0, 331.0, 1063.0, 941.0, 511.0, 731.0, 805.0, 753.0, 479.0, 510.0, 460.0, 623.0, 815.0, 410.0, 780.0, 876.0};
    public static final double[] pi =
            {552.0, 725.0, 232.0, 357.0, 524.0, 364.0, 611.0, 620.0, 1134.0, 340.0, 454.0, 710.0, 456.0, 378.0, 723.0, 996.0, 962.0, 1081.0, 1197.0, 671.0, 930.0, 1122.0, 649.0, 618.0, 1037.0, 266.0, 1030.0, 780.0, 747.0, 279.0};
    public static final LinkedHashSet<Facility> V = new LinkedHashSet<>();
    public static double[][] disMatrix = {
            {0.00, 159.94, 112.67, 109.43, 92.78, 151.04, 125.29, 81.92, 144.22, 142.86, 145.90, 156.16, 169.73, 114.03, 156.99, 157.10, 171.72, 124.92, 136.49, 198.41, 143.03, 118.55, 144.88, 119.41, 156.46, 158.47, 135.15, 81.25, 104.36, 96.39},
            {159.94, 0.00, 194.87, 131.79, 116.19, 103.73, 92.84, 101.53, 112.32, 156.32, 90.24, 100.20, 86.52, 150.54, 147.36, 104.31, 147.54, 131.60, 151.44, 180.19, 91.91, 171.04, 170.22, 95.69, 165.35, 180.84, 197.58, 195.54, 139.56, 195.19},
            {112.67, 194.87, 0.00, 164.14, 170.83, 164.01, 188.62, 135.17, 103.19, 168.96, 130.77, 131.89, 106.74, 96.45, 182.79, 89.57, 188.59, 160.24, 119.66, 106.69, 198.82, 83.41, 175.07, 184.54, 185.78, 154.22, 191.94, 104.81, 150.51, 96.14},
            {109.43, 131.79, 164.14, 0.00, 141.73, 105.44, 146.34, 87.13, 189.75, 150.71, 175.14, 106.38, 170.96, 171.50, 151.54, 92.96, 122.48, 195.33, 99.37, 171.85, 113.82, 152.69, 191.80, 156.44, 185.05, 137.86, 87.25, 194.95, 145.33, 136.53},
            {92.78, 116.19, 170.83, 141.73, 0.00, 127.70, 189.59, 181.03, 191.58, 154.25, 82.90, 192.47, 100.53, 156.82, 194.85, 162.26, 184.10, 110.46, 107.09, 175.91, 155.44, 80.57, 87.68, 166.72, 132.64, 162.10, 89.70, 161.96, 95.08, 135.25},
            {151.04, 103.73, 164.01, 105.44, 127.70, 0.00, 101.69, 86.40, 144.64, 150.65, 155.53, 151.74, 157.96, 181.53, 89.19, 126.85, 124.34, 118.80, 177.09, 104.03, 136.30, 196.66, 140.22, 190.06, 155.64, 122.41, 110.74, 98.72, 117.95, 123.44},
            {125.29, 92.84, 188.62, 146.34, 189.59, 101.69, 0.00, 172.90, 142.62, 181.83, 117.65, 92.05, 97.46, 176.53, 160.47, 138.21, 80.55, 152.63, 182.72, 148.19, 108.21, 195.41, 87.52, 112.07, 92.81, 158.89, 163.17, 135.45, 150.59, 80.89},
            {81.92, 101.53, 135.17, 87.13, 181.03, 86.40, 172.90, 0.00, 90.61, 177.70, 135.06, 105.66, 140.08, 179.76, 168.49, 170.16, 180.72, 151.32, 175.38, 183.88, 150.49, 128.18, 186.84, 109.33, 130.56, 194.00, 83.78, 191.19, 139.04, 149.45},
            {144.22, 112.32, 103.19, 189.75, 191.58, 144.64, 142.62, 90.61, 0.00, 199.27, 147.25, 83.52, 142.75, 87.08, 102.51, 190.19, 91.38, 143.17, 180.35, 98.96, 103.85, 120.99, 120.59, 160.28, 153.25, 109.16, 194.10, 168.27, 81.21, 161.05},
            {142.86, 156.32, 168.96, 150.71, 154.25, 150.65, 181.83, 177.70, 199.27, 0.00, 147.24, 138.52, 180.98, 121.49, 136.56, 105.61, 162.91, 164.13, 85.51, 196.16, 83.24, 176.08, 169.37, 187.90, 178.86, 82.33, 133.46, 193.21, 176.34, 173.12},
            {145.90, 90.24, 130.77, 175.14, 82.90, 155.53, 117.65, 135.06, 147.25, 147.24, 0.00, 111.85, 87.95, 172.38, 80.79, 139.85, 81.67, 175.91, 130.65, 163.47, 155.20, 178.94, 161.38, 122.34, 94.70, 143.29, 136.13, 100.32, 128.09, 114.82},
            {156.16, 100.20, 131.89, 106.38, 192.47, 151.74, 92.05, 105.66, 83.52, 138.52, 111.85, 0.00, 103.73, 118.54, 120.89, 124.72, 122.53, 170.92, 112.49, 128.72, 185.56, 90.47, 112.77, 171.17, 185.71, 106.96, 170.19, 119.32, 173.83, 152.92},
            {169.73, 86.52, 106.74, 170.96, 100.53, 157.96, 97.46, 140.08, 142.75, 180.98, 87.95, 103.73, 0.00, 168.94, 176.84, 149.82, 134.32, 171.81, 151.71, 108.58, 106.09, 158.79, 84.29, 117.46, 99.97, 158.37, 175.71, 191.04, 163.01, 109.37},
            {114.03, 150.54, 96.45, 171.50, 156.82, 181.53, 176.53, 179.76, 87.08, 121.49, 172.38, 118.54, 168.94, 0.00, 194.17, 171.28, 180.08, 165.54, 119.02, 117.90, 112.23, 83.27, 147.48, 183.69, 184.89, 175.10, 138.14, 153.26, 186.29, 107.02},
            {156.99, 147.36, 182.79, 151.54, 194.85, 89.19, 160.47, 168.49, 102.51, 136.56, 80.79, 120.89, 176.84, 194.17, 0.00, 98.47, 121.62, 145.86, 167.50, 120.07, 140.15, 96.34, 139.01, 185.88, 182.67, 100.37, 160.03, 197.78, 123.22, 163.41},
            {157.10, 104.31, 89.57, 92.96, 162.26, 126.85, 138.21, 170.16, 190.19, 105.61, 139.85, 124.72, 149.82, 171.28, 98.47, 0.00, 96.34, 80.84, 129.77, 139.75, 144.57, 112.36, 164.42, 106.87, 109.65, 179.02, 100.82, 135.72, 109.33, 84.82},
            {171.72, 147.54, 188.59, 122.48, 184.10, 124.34, 80.55, 180.72, 91.38, 162.91, 81.67, 122.53, 134.32, 180.08, 121.62, 96.34, 0.00, 83.31, 80.45, 125.23, 155.35, 160.06, 151.14, 118.70, 130.60, 123.67, 176.38, 163.70, 109.01, 87.96},
            {124.92, 131.60, 160.24, 195.33, 110.46, 118.80, 152.63, 151.32, 143.17, 164.13, 175.91, 170.92, 171.81, 165.54, 145.86, 80.84, 83.31, 0.00, 170.13, 95.42, 179.60, 98.39, 168.01, 174.27, 196.85, 96.36, 93.33, 179.40, 154.93, 113.94},
            {136.49, 151.44, 119.66, 99.37, 107.09, 177.09, 182.72, 175.38, 180.35, 85.51, 130.65, 112.49, 151.71, 119.02, 167.50, 129.77, 80.45, 170.13, 0.00, 91.49, 134.07, 83.05, 185.43, 133.64, 167.24, 153.04, 126.57, 136.92, 111.49, 163.10},
            {198.41, 180.19, 106.69, 171.85, 175.91, 104.03, 148.19, 183.88, 98.96, 196.16, 163.47, 128.72, 108.58, 117.90, 120.07, 139.75, 125.23, 95.42, 91.49, 0.00, 89.31, 97.85, 166.79, 178.49, 171.64, 149.46, 163.01, 190.07, 107.19, 149.83},
            {143.03, 91.91, 198.82, 113.82, 155.44, 136.30, 108.21, 150.49, 103.85, 83.24, 155.20, 185.56, 106.09, 112.23, 140.15, 144.57, 155.35, 179.60, 134.07, 89.31, 0.00, 190.97, 116.20, 137.95, 150.80, 82.55, 81.03, 146.33, 160.48, 164.99},
            {118.55, 171.04, 83.41, 152.69, 80.57, 196.66, 195.41, 128.18, 120.99, 176.08, 178.94, 90.47, 158.79, 83.27, 96.34, 112.36, 160.06, 98.39, 83.05, 97.85, 190.97, 0.00, 174.10, 148.80, 81.60, 132.60, 151.68, 93.97, 180.20, 171.23},
            {144.88, 170.22, 175.07, 191.80, 87.68, 140.22, 87.52, 186.84, 120.59, 169.37, 161.38, 112.77, 84.29, 147.48, 139.01, 164.42, 151.14, 168.01, 185.43, 166.79, 116.20, 174.10, 0.00, 139.20, 121.34, 115.20, 196.45, 97.23, 104.76, 159.04},
            {119.41, 95.69, 184.54, 156.44, 166.72, 190.06, 112.07, 109.33, 160.28, 187.90, 122.34, 171.17, 117.46, 183.69, 185.88, 106.87, 118.70, 174.27, 133.64, 178.49, 137.95, 148.80, 139.20, 0.00, 186.07, 140.19, 106.22, 163.26, 100.61, 147.26},
            {156.46, 165.35, 185.78, 185.05, 132.64, 155.64, 92.81, 130.56, 153.25, 178.86, 94.70, 185.71, 99.97, 184.89, 182.67, 109.65, 130.60, 196.85, 167.24, 171.64, 150.80, 81.60, 121.34, 186.07, 0.00, 140.33, 190.29, 152.71, 119.19, 158.92},
            {158.47, 180.84, 154.22, 137.86, 162.10, 122.41, 158.89, 194.00, 109.16, 82.33, 143.29, 106.96, 158.37, 175.10, 100.37, 179.02, 123.67, 96.36, 153.04, 149.46, 82.55, 132.60, 115.20, 140.19, 140.33, 0.00, 103.55, 166.67, 172.76, 167.91},
            {135.15, 197.58, 191.94, 87.25, 89.70, 110.74, 163.17, 83.78, 194.10, 133.46, 136.13, 170.19, 175.71, 138.14, 160.03, 100.82, 176.38, 93.33, 126.57, 163.01, 81.03, 151.68, 196.45, 106.22, 190.29, 103.55, 0.00, 182.81, 184.42, 166.02},
            {81.25, 195.54, 104.81, 194.95, 161.96, 98.72, 135.45, 191.19, 168.27, 193.21, 100.32, 119.32, 191.04, 153.26, 197.78, 135.72, 163.70, 179.40, 136.92, 190.07, 146.33, 93.97, 97.23, 163.26, 152.71, 166.67, 182.81, 0.00, 84.70, 130.65},
            {104.36, 139.56, 150.51, 145.33, 95.08, 117.95, 150.59, 139.04, 81.21, 176.34, 128.09, 173.83, 163.01, 186.29, 123.22, 109.33, 109.01, 154.93, 111.49, 107.19, 160.48, 180.20, 104.76, 100.61, 119.19, 172.76, 184.42, 84.70, 0.00, 121.91},
            {96.39, 195.19, 96.14, 136.53, 135.25, 123.44, 80.89, 149.45, 161.05, 173.12, 114.82, 152.92, 109.37, 107.02, 163.41, 84.82, 87.96, 113.94, 163.10, 149.83, 164.99, 171.23, 159.04, 147.26, 158.92, 167.91, 166.02, 130.65, 121.91, 0.00},
    };
    public static final double φp = 0.3;  //本例中都取0.2是会得到性质7疯狂降阶的情况，然后通过性质4直接得到了最优解
    public static final double φc = 0.3;
    public static double P;
    public static double C;

    public static void main(String[] args) {
        preHandle();
    }

    public static void preHandle() {
        DecimalFormat decimalFormat = new DecimalFormat("#.00");
        P = Arrays.stream(pi).reduce(0.0, Double::sum) * φp;
        C = Arrays.stream(ci).reduce(0.0, Double::sum) * φc;
        P = Double.parseDouble(decimalFormat.format(P));
        C = Double.parseDouble(decimalFormat.format(C));
        System.out.println("P = " + P);
        System.out.println("C = " + C);
        for (int i = 0; i < pi.length; i++) {
            V.add(new Facility(i + 1, ci[i], pi[i], pi[i] / ci[i]));
        }
    }
}
