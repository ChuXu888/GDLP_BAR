package com.chuxu.BackTrackingAlgorithmWithReduction.part01_preHandleData.RandomCase;

import com.chuxu.entity.Facility;

import java.text.DecimalFormat;
import java.util.Arrays;
import java.util.LinkedHashSet;

public class N30_5 {
    public static int dimension = 30;
    public static final double[] ci =
            {582.0, 868.0, 249.0, 801.0, 795.0, 253.0, 1176.0, 509.0, 509.0, 338.0, 746.0, 429.0, 1108.0, 880.0, 606.0, 715.0, 691.0, 344.0, 715.0, 612.0, 408.0, 674.0, 875.0, 269.0, 504.0, 937.0, 219.0, 1167.0, 845.0, 259.0};
    public static final double[] pi =
            {768.0, 1103.0, 212.0, 647.0, 776.0, 408.0, 1008.0, 219.0, 1160.0, 205.0, 783.0, 1033.0, 259.0, 312.0, 772.0, 1185.0, 941.0, 411.0, 652.0, 1143.0, 627.0, 810.0, 1055.0, 920.0, 1046.0, 885.0, 613.0, 212.0, 351.0, 419.0};
    public static final LinkedHashSet<Facility> V = new LinkedHashSet<>();
    public static double[][] disMatrix = {
            {0.00, 114.82, 196.77, 131.16, 198.63, 180.51, 128.00, 130.18, 158.10, 125.83, 135.83, 164.29, 113.67, 148.45, 163.21, 110.48, 129.12, 102.72, 152.01, 168.59, 124.72, 91.15, 122.64, 181.24, 109.89, 177.92, 167.80, 170.01, 187.47, 91.57},
            {114.82, 0.00, 158.29, 167.95, 117.92, 128.73, 96.09, 145.99, 136.52, 110.17, 190.96, 101.06, 84.01, 132.48, 161.69, 158.63, 143.26, 165.52, 91.60, 120.48, 169.67, 105.57, 80.19, 140.35, 122.28, 188.31, 89.04, 136.16, 85.66, 172.95},
            {196.77, 158.29, 0.00, 139.65, 146.65, 179.02, 190.58, 144.59, 193.88, 119.65, 164.85, 180.68, 119.74, 141.92, 101.64, 183.85, 125.46, 130.96, 147.52, 180.20, 157.67, 91.83, 92.70, 106.35, 92.71, 120.45, 184.57, 174.48, 152.91, 111.75},
            {131.16, 167.95, 139.65, 0.00, 81.68, 83.39, 184.28, 133.34, 195.70, 166.95, 94.70, 149.81, 140.08, 124.59, 134.58, 163.09, 89.62, 96.09, 199.41, 198.52, 193.54, 83.59, 144.03, 154.25, 137.72, 89.04, 183.03, 183.18, 197.82, 103.39},
            {198.63, 117.92, 146.65, 81.68, 0.00, 89.97, 112.22, 145.29, 176.36, 140.14, 182.56, 82.00, 91.82, 87.18, 117.99, 87.06, 113.25, 123.49, 194.58, 100.48, 87.58, 107.55, 195.67, 103.67, 103.00, 108.38, 130.26, 105.60, 167.26, 117.83},
            {180.51, 128.73, 179.02, 83.39, 89.97, 0.00, 130.90, 185.86, 127.83, 136.23, 148.61, 122.60, 133.97, 184.91, 88.13, 143.07, 182.79, 101.28, 155.69, 198.59, 97.86, 147.68, 144.60, 123.25, 138.12, 114.95, 80.59, 167.24, 89.16, 164.78},
            {128.00, 96.09, 190.58, 184.28, 112.22, 130.90, 0.00, 129.13, 180.41, 145.51, 131.83, 171.46, 121.00, 114.10, 117.48, 103.59, 176.82, 133.80, 191.62, 104.50, 132.45, 174.20, 196.76, 175.13, 136.52, 89.55, 141.29, 168.82, 196.57, 159.45},
            {130.18, 145.99, 144.59, 133.34, 145.29, 185.86, 129.13, 0.00, 114.00, 156.97, 116.83, 87.91, 131.59, 140.23, 195.69, 155.82, 164.41, 105.94, 134.53, 149.34, 92.13, 126.93, 198.67, 177.51, 82.37, 154.46, 113.61, 147.57, 139.32, 139.93},
            {158.10, 136.52, 193.88, 195.70, 176.36, 127.83, 180.41, 114.00, 0.00, 116.29, 164.53, 177.97, 125.28, 91.09, 144.38, 181.34, 91.41, 164.24, 155.94, 153.98, 166.57, 107.77, 116.45, 134.39, 153.69, 135.79, 99.34, 152.39, 195.63, 80.63},
            {125.83, 110.17, 119.65, 166.95, 140.14, 136.23, 145.51, 156.97, 116.29, 0.00, 110.08, 154.33, 122.07, 195.59, 107.02, 89.81, 169.03, 103.46, 88.90, 198.14, 174.32, 176.35, 199.23, 90.93, 107.19, 92.62, 90.28, 179.20, 169.85, 150.32},
            {135.83, 190.96, 164.85, 94.70, 182.56, 148.61, 131.83, 116.83, 164.53, 110.08, 0.00, 165.05, 179.23, 151.41, 124.54, 135.84, 90.71, 181.51, 157.00, 81.34, 174.19, 121.20, 81.70, 91.47, 101.54, 183.02, 119.07, 140.30, 174.25, 110.01},
            {164.29, 101.06, 180.68, 149.81, 82.00, 122.60, 171.46, 87.91, 177.97, 154.33, 165.05, 0.00, 133.81, 182.39, 178.53, 85.02, 167.99, 145.89, 114.62, 87.33, 130.91, 138.75, 139.68, 142.56, 191.31, 149.88, 159.31, 104.91, 95.11, 137.15},
            {113.67, 84.01, 119.74, 140.08, 91.82, 133.97, 121.00, 131.59, 125.28, 122.07, 179.23, 133.81, 0.00, 112.30, 107.25, 83.02, 127.77, 116.48, 95.43, 187.73, 133.57, 80.39, 86.77, 169.09, 105.14, 176.43, 81.24, 118.44, 93.27, 115.47},
            {148.45, 132.48, 141.92, 124.59, 87.18, 184.91, 114.10, 140.23, 91.09, 195.59, 151.41, 182.39, 112.30, 0.00, 104.93, 109.48, 134.91, 141.30, 81.39, 153.26, 173.03, 155.08, 185.11, 128.75, 155.92, 105.93, 114.75, 148.05, 181.19, 143.14},
            {163.21, 161.69, 101.64, 134.58, 117.99, 88.13, 117.48, 195.69, 144.38, 107.02, 124.54, 178.53, 107.25, 104.93, 0.00, 170.08, 176.64, 153.35, 178.79, 127.29, 144.23, 191.07, 176.44, 81.25, 90.59, 111.45, 102.55, 181.49, 93.47, 133.12},
            {110.48, 158.63, 183.85, 163.09, 87.06, 143.07, 103.59, 155.82, 181.34, 89.81, 135.84, 85.02, 83.02, 109.48, 170.08, 0.00, 91.44, 170.16, 141.81, 118.99, 143.20, 195.72, 148.04, 181.30, 115.59, 85.33, 176.55, 178.00, 87.10, 111.77},
            {129.12, 143.26, 125.46, 89.62, 113.25, 182.79, 176.82, 164.41, 91.41, 169.03, 90.71, 167.99, 127.77, 134.91, 176.64, 91.44, 0.00, 103.55, 179.24, 157.42, 87.42, 154.50, 136.13, 175.19, 198.32, 90.79, 101.51, 139.63, 195.47, 115.79},
            {102.72, 165.52, 130.96, 96.09, 123.49, 101.28, 133.80, 105.94, 164.24, 103.46, 181.51, 145.89, 116.48, 141.30, 153.35, 170.16, 103.55, 0.00, 193.25, 153.49, 148.36, 83.43, 95.60, 89.33, 137.56, 158.50, 182.64, 89.16, 98.61, 138.22},
            {152.01, 91.60, 147.52, 199.41, 194.58, 155.69, 191.62, 134.53, 155.94, 88.90, 157.00, 114.62, 95.43, 81.39, 178.79, 141.81, 179.24, 193.25, 0.00, 119.99, 169.73, 128.45, 198.30, 177.33, 151.34, 128.82, 194.51, 183.79, 147.45, 127.50},
            {168.59, 120.48, 180.20, 198.52, 100.48, 198.59, 104.50, 149.34, 153.98, 198.14, 81.34, 87.33, 187.73, 153.26, 127.29, 118.99, 157.42, 153.49, 119.99, 0.00, 151.96, 81.95, 185.99, 108.94, 89.67, 183.50, 99.67, 179.65, 136.46, 100.67},
            {124.72, 169.67, 157.67, 193.54, 87.58, 97.86, 132.45, 92.13, 166.57, 174.32, 174.19, 130.91, 133.57, 173.03, 144.23, 143.20, 87.42, 148.36, 169.73, 151.96, 0.00, 183.95, 112.15, 117.34, 162.24, 115.36, 152.44, 185.42, 161.65, 131.36},
            {91.15, 105.57, 91.83, 83.59, 107.55, 147.68, 174.20, 126.93, 107.77, 176.35, 121.20, 138.75, 80.39, 155.08, 191.07, 195.72, 154.50, 83.43, 128.45, 81.95, 183.95, 0.00, 81.72, 84.96, 166.98, 134.80, 92.18, 94.55, 128.46, 161.84},
            {122.64, 80.19, 92.70, 144.03, 195.67, 144.60, 196.76, 198.67, 116.45, 199.23, 81.70, 139.68, 86.77, 185.11, 176.44, 148.04, 136.13, 95.60, 198.30, 185.99, 112.15, 81.72, 0.00, 109.60, 137.55, 109.31, 141.63, 172.07, 157.84, 138.92},
            {181.24, 140.35, 106.35, 154.25, 103.67, 123.25, 175.13, 177.51, 134.39, 90.93, 91.47, 142.56, 169.09, 128.75, 81.25, 181.30, 175.19, 89.33, 177.33, 108.94, 117.34, 84.96, 109.60, 0.00, 159.42, 194.86, 164.30, 184.99, 111.54, 195.29},
            {109.89, 122.28, 92.71, 137.72, 103.00, 138.12, 136.52, 82.37, 153.69, 107.19, 101.54, 191.31, 105.14, 155.92, 90.59, 115.59, 198.32, 137.56, 151.34, 89.67, 162.24, 166.98, 137.55, 159.42, 0.00, 106.25, 81.93, 151.65, 179.72, 154.71},
            {177.92, 188.31, 120.45, 89.04, 108.38, 114.95, 89.55, 154.46, 135.79, 92.62, 183.02, 149.88, 176.43, 105.93, 111.45, 85.33, 90.79, 158.50, 128.82, 183.50, 115.36, 134.80, 109.31, 194.86, 106.25, 0.00, 158.10, 112.04, 86.11, 190.56},
            {167.80, 89.04, 184.57, 183.03, 130.26, 80.59, 141.29, 113.61, 99.34, 90.28, 119.07, 159.31, 81.24, 114.75, 102.55, 176.55, 101.51, 182.64, 194.51, 99.67, 152.44, 92.18, 141.63, 164.30, 81.93, 158.10, 0.00, 132.59, 101.99, 111.41},
            {170.01, 136.16, 174.48, 183.18, 105.60, 167.24, 168.82, 147.57, 152.39, 179.20, 140.30, 104.91, 118.44, 148.05, 181.49, 178.00, 139.63, 89.16, 183.79, 179.65, 185.42, 94.55, 172.07, 184.99, 151.65, 112.04, 132.59, 0.00, 181.12, 164.85},
            {187.47, 85.66, 152.91, 197.82, 167.26, 89.16, 196.57, 139.32, 195.63, 169.85, 174.25, 95.11, 93.27, 181.19, 93.47, 87.10, 195.47, 98.61, 147.45, 136.46, 161.65, 128.46, 157.84, 111.54, 179.72, 86.11, 101.99, 181.12, 0.00, 137.28},
            {91.57, 172.95, 111.75, 103.39, 117.83, 164.78, 159.45, 139.93, 80.63, 150.32, 110.01, 137.15, 115.47, 143.14, 133.12, 111.77, 115.79, 138.22, 127.50, 100.67, 131.36, 161.84, 138.92, 195.29, 154.71, 190.56, 111.41, 164.85, 137.28, 0.00},
    };
    public static final double φp = 0.3;  //本例中都取0.2是会得到性质7疯狂降阶的情况，然后通过性质4直接得到了最优解
    public static final double φc = 0.3;
    public static double P;
    public static double C;

    public static void main(String[] args) {
        preHandle();
    }

    public static void preHandle() {
        DecimalFormat decimalFormat = new DecimalFormat("#.00");
        P = Arrays.stream(pi).reduce(0.0, Double::sum) * φp;
        C = Arrays.stream(ci).reduce(0.0, Double::sum) * φc;
        P = Double.parseDouble(decimalFormat.format(P));
        C = Double.parseDouble(decimalFormat.format(C));
        System.out.println("P = " + P);
        System.out.println("C = " + C);
        for (int i = 0; i < pi.length; i++) {
            V.add(new Facility(i + 1, ci[i], pi[i], pi[i] / ci[i]));
        }
    }
}
