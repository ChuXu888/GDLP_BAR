package com.chuxu.BackTrackingAlgorithmWithReduction.part01_preHandleData.RandomCase;

import com.chuxu.entity.Facility;

import java.text.DecimalFormat;
import java.util.Arrays;
import java.util.LinkedHashSet;

public class N32_1 {
    public static int dimension = 32;
    public static final double[] ci =
            {915.0, 531.0, 1002.0, 831.0, 701.0, 490.0, 1095.0, 849.0, 1032.0, 1142.0, 534.0, 1104.0, 966.0, 481.0, 943.0, 972.0, 276.0, 944.0, 948.0, 950.0, 1128.0, 355.0, 680.0, 698.0, 202.0, 1186.0, 800.0, 1078.0, 724.0, 287.0, 603.0, 1099.0};
    public static final double[] pi =
            {1082.0, 620.0, 393.0, 974.0, 295.0, 385.0, 219.0, 986.0, 1175.0, 1052.0, 232.0, 989.0, 1172.0, 1122.0, 1148.0, 947.0, 745.0, 426.0, 483.0, 1028.0, 716.0, 266.0, 1075.0, 865.0, 980.0, 269.0, 980.0, 1021.0, 819.0, 983.0, 1186.0, 916.0};
    public static final LinkedHashSet<Facility> V = new LinkedHashSet<>();
    public static double[][] disMatrix = {
            {0.00, 89.66, 102.85, 165.00, 167.99, 134.77, 139.91, 91.78, 126.93, 107.84, 98.58, 108.46, 124.50, 183.76, 181.31, 114.45, 116.08, 189.89, 127.58, 123.96, 134.94, 89.20, 110.31, 166.08, 114.47, 130.77, 119.59, 111.64, 191.80, 113.51, 188.78, 184.24},
            {89.66, 0.00, 188.72, 154.71, 101.16, 159.95, 106.02, 174.66, 161.70, 161.70, 130.55, 121.68, 189.23, 149.72, 121.96, 128.83, 198.29, 177.81, 136.73, 114.68, 137.97, 148.34, 102.40, 134.50, 96.66, 194.76, 152.97, 176.85, 127.06, 150.96, 179.05, 82.45},
            {102.85, 188.72, 0.00, 135.08, 110.32, 192.36, 117.77, 189.11, 155.23, 153.93, 105.68, 142.70, 108.86, 128.74, 98.14, 144.47, 146.51, 127.34, 133.63, 112.81, 182.32, 135.42, 92.02, 141.19, 80.06, 177.59, 84.76, 191.50, 122.86, 89.91, 195.89, 128.14},
            {165.00, 154.71, 135.08, 0.00, 97.05, 188.19, 161.89, 184.85, 118.94, 134.92, 183.74, 99.37, 161.16, 107.82, 144.32, 197.35, 196.51, 176.17, 97.35, 97.58, 132.29, 118.66, 81.14, 84.87, 137.05, 87.56, 91.14, 194.59, 124.33, 98.46, 139.81, 114.79},
            {167.99, 101.16, 110.32, 97.05, 0.00, 94.17, 144.05, 180.55, 97.04, 183.54, 191.87, 154.30, 96.58, 120.47, 152.81, 93.47, 94.98, 154.35, 136.46, 166.97, 155.51, 86.43, 103.01, 173.66, 181.54, 149.24, 178.99, 168.42, 112.73, 183.02, 144.83, 115.60},
            {134.77, 159.95, 192.36, 188.19, 94.17, 0.00, 81.57, 149.47, 87.27, 149.58, 104.45, 189.71, 138.10, 139.81, 197.15, 173.37, 113.11, 170.18, 183.34, 159.66, 121.00, 128.04, 148.14, 198.84, 112.00, 177.83, 155.09, 163.81, 199.42, 187.36, 135.47, 136.92},
            {139.91, 106.02, 117.77, 161.89, 144.05, 81.57, 0.00, 134.66, 182.00, 93.07, 125.52, 187.24, 142.51, 185.38, 182.96, 196.27, 97.02, 84.02, 87.51, 198.26, 165.67, 162.38, 102.30, 198.62, 158.46, 187.90, 82.92, 180.00, 102.87, 109.14, 117.06, 170.75},
            {91.78, 174.66, 189.11, 184.85, 180.55, 149.47, 134.66, 0.00, 86.85, 184.65, 132.00, 130.01, 126.31, 140.94, 90.73, 183.50, 123.32, 151.01, 196.38, 125.04, 91.66, 113.03, 97.46, 163.50, 131.06, 180.23, 192.43, 163.70, 169.79, 148.55, 92.54, 101.96},
            {126.93, 161.70, 155.23, 118.94, 97.04, 87.27, 182.00, 86.85, 0.00, 186.95, 107.82, 195.60, 92.84, 191.93, 145.17, 150.94, 103.91, 117.65, 136.02, 157.32, 158.37, 97.66, 128.34, 130.54, 113.15, 144.20, 160.32, 166.33, 110.79, 184.74, 109.15, 166.94},
            {107.84, 161.70, 153.93, 134.92, 183.54, 149.58, 93.07, 184.65, 186.95, 0.00, 138.50, 149.49, 190.68, 155.98, 106.05, 130.21, 174.74, 196.26, 156.83, 152.79, 90.59, 149.35, 192.08, 101.92, 129.25, 92.95, 98.30, 165.45, 126.92, 123.89, 121.54, 109.52},
            {98.58, 130.55, 105.68, 183.74, 191.87, 104.45, 125.52, 132.00, 107.82, 138.50, 0.00, 193.29, 119.21, 109.19, 152.18, 133.50, 167.25, 181.29, 134.48, 99.85, 92.66, 118.06, 131.95, 161.37, 186.07, 158.88, 128.03, 194.68, 149.13, 160.33, 122.84, 118.73},
            {108.46, 121.68, 142.70, 99.37, 154.30, 189.71, 187.24, 130.01, 195.60, 149.49, 193.29, 0.00, 139.37, 196.77, 196.41, 139.06, 127.18, 187.11, 145.02, 133.59, 118.39, 114.52, 122.62, 82.96, 151.13, 153.50, 166.06, 161.90, 104.50, 169.62, 163.89, 86.57},
            {124.50, 189.23, 108.86, 161.16, 96.58, 138.10, 142.51, 126.31, 92.84, 190.68, 119.21, 139.37, 0.00, 99.25, 131.97, 142.81, 154.40, 106.88, 137.23, 174.06, 198.08, 113.91, 106.13, 104.15, 84.95, 91.76, 99.49, 130.09, 145.78, 140.34, 90.65, 128.58},
            {183.76, 149.72, 128.74, 107.82, 120.47, 139.81, 185.38, 140.94, 191.93, 155.98, 109.19, 196.77, 99.25, 0.00, 133.38, 104.94, 124.73, 132.02, 152.47, 110.81, 172.42, 101.22, 145.82, 179.23, 127.09, 135.36, 89.99, 140.79, 98.74, 124.13, 165.55, 128.62},
            {181.31, 121.96, 98.14, 144.32, 152.81, 197.15, 182.96, 90.73, 145.17, 106.05, 152.18, 196.41, 131.97, 133.38, 0.00, 147.04, 185.50, 102.03, 133.99, 107.80, 84.34, 137.21, 80.79, 123.32, 152.90, 93.02, 142.87, 167.09, 153.74, 157.38, 109.81, 176.54},
            {114.45, 128.83, 144.47, 197.35, 93.47, 173.37, 196.27, 183.50, 150.94, 130.21, 133.50, 139.06, 142.81, 104.94, 147.04, 0.00, 158.75, 191.22, 101.42, 95.02, 185.15, 154.66, 120.67, 175.26, 149.91, 123.86, 96.84, 191.36, 198.57, 191.90, 87.36, 144.72},
            {116.08, 198.29, 146.51, 196.51, 94.98, 113.11, 97.02, 123.32, 103.91, 174.74, 167.25, 127.18, 154.40, 124.73, 185.50, 158.75, 0.00, 112.65, 152.38, 96.95, 111.98, 102.07, 93.85, 176.22, 108.80, 164.22, 125.66, 119.95, 113.19, 181.46, 133.07, 196.29},
            {189.89, 177.81, 127.34, 176.17, 154.35, 170.18, 84.02, 151.01, 117.65, 196.26, 181.29, 187.11, 106.88, 132.02, 102.03, 191.22, 112.65, 0.00, 145.73, 151.55, 199.31, 183.32, 181.33, 82.81, 97.02, 128.44, 147.95, 96.33, 198.88, 118.48, 153.07, 162.32},
            {127.58, 136.73, 133.63, 97.35, 136.46, 183.34, 87.51, 196.38, 136.02, 156.83, 134.48, 145.02, 137.23, 152.47, 133.99, 101.42, 152.38, 145.73, 0.00, 89.42, 154.83, 126.57, 95.59, 155.05, 88.10, 121.68, 107.47, 88.74, 80.61, 130.98, 117.04, 128.69},
            {123.96, 114.68, 112.81, 97.58, 166.97, 159.66, 198.26, 125.04, 157.32, 152.79, 99.85, 133.59, 174.06, 110.81, 107.80, 95.02, 96.95, 151.55, 89.42, 0.00, 152.60, 95.04, 83.91, 116.86, 109.50, 84.02, 158.48, 113.86, 142.66, 180.62, 92.08, 140.81},
            {134.94, 137.97, 182.32, 132.29, 155.51, 121.00, 165.67, 91.66, 158.37, 90.59, 92.66, 118.39, 198.08, 172.42, 84.34, 185.15, 111.98, 199.31, 154.83, 152.60, 0.00, 164.85, 103.18, 190.37, 116.57, 164.40, 83.01, 88.06, 180.66, 138.19, 108.32, 170.80},
            {89.20, 148.34, 135.42, 118.66, 86.43, 128.04, 162.38, 113.03, 97.66, 149.35, 118.06, 114.52, 113.91, 101.22, 137.21, 154.66, 102.07, 183.32, 126.57, 95.04, 164.85, 0.00, 177.44, 174.05, 89.46, 92.55, 166.38, 116.62, 186.38, 92.16, 136.12, 88.69},
            {110.31, 102.40, 92.02, 81.14, 103.01, 148.14, 102.30, 97.46, 128.34, 192.08, 131.95, 122.62, 106.13, 145.82, 80.79, 120.67, 93.85, 181.33, 95.59, 83.91, 103.18, 177.44, 0.00, 108.84, 142.47, 196.78, 151.13, 93.52, 168.66, 165.39, 129.90, 199.60},
            {166.08, 134.50, 141.19, 84.87, 173.66, 198.84, 198.62, 163.50, 130.54, 101.92, 161.37, 82.96, 104.15, 179.23, 123.32, 175.26, 176.22, 82.81, 155.05, 116.86, 190.37, 174.05, 108.84, 0.00, 89.20, 83.38, 117.23, 145.19, 103.93, 133.13, 166.93, 172.09},
            {114.47, 96.66, 80.06, 137.05, 181.54, 112.00, 158.46, 131.06, 113.15, 129.25, 186.07, 151.13, 84.95, 127.09, 152.90, 149.91, 108.80, 97.02, 88.10, 109.50, 116.57, 89.46, 142.47, 89.20, 0.00, 117.86, 92.29, 129.89, 134.59, 127.93, 199.81, 96.25},
            {130.77, 194.76, 177.59, 87.56, 149.24, 177.83, 187.90, 180.23, 144.20, 92.95, 158.88, 153.50, 91.76, 135.36, 93.02, 123.86, 164.22, 128.44, 121.68, 84.02, 164.40, 92.55, 196.78, 83.38, 117.86, 0.00, 80.73, 131.64, 147.01, 84.31, 149.97, 162.37},
            {119.59, 152.97, 84.76, 91.14, 178.99, 155.09, 82.92, 192.43, 160.32, 98.30, 128.03, 166.06, 99.49, 89.99, 142.87, 96.84, 125.66, 147.95, 107.47, 158.48, 83.01, 166.38, 151.13, 117.23, 92.29, 80.73, 0.00, 169.81, 84.02, 91.58, 135.64, 185.08},
            {111.64, 176.85, 191.50, 194.59, 168.42, 163.81, 180.00, 163.70, 166.33, 165.45, 194.68, 161.90, 130.09, 140.79, 167.09, 191.36, 119.95, 96.33, 88.74, 113.86, 88.06, 116.62, 93.52, 145.19, 129.89, 131.64, 169.81, 0.00, 164.32, 111.24, 103.89, 184.21},
            {191.80, 127.06, 122.86, 124.33, 112.73, 199.42, 102.87, 169.79, 110.79, 126.92, 149.13, 104.50, 145.78, 98.74, 153.74, 198.57, 113.19, 198.88, 80.61, 142.66, 180.66, 186.38, 168.66, 103.93, 134.59, 147.01, 84.02, 164.32, 0.00, 128.38, 160.67, 184.20},
            {113.51, 150.96, 89.91, 98.46, 183.02, 187.36, 109.14, 148.55, 184.74, 123.89, 160.33, 169.62, 140.34, 124.13, 157.38, 191.90, 181.46, 118.48, 130.98, 180.62, 138.19, 92.16, 165.39, 133.13, 127.93, 84.31, 91.58, 111.24, 128.38, 0.00, 191.63, 110.20},
            {188.78, 179.05, 195.89, 139.81, 144.83, 135.47, 117.06, 92.54, 109.15, 121.54, 122.84, 163.89, 90.65, 165.55, 109.81, 87.36, 133.07, 153.07, 117.04, 92.08, 108.32, 136.12, 129.90, 166.93, 199.81, 149.97, 135.64, 103.89, 160.67, 191.63, 0.00, 156.45},
            {184.24, 82.45, 128.14, 114.79, 115.60, 136.92, 170.75, 101.96, 166.94, 109.52, 118.73, 86.57, 128.58, 128.62, 176.54, 144.72, 196.29, 162.32, 128.69, 140.81, 170.80, 88.69, 199.60, 172.09, 96.25, 162.37, 185.08, 184.21, 184.20, 110.20, 156.45, 0.00},
    };
    public static final double φp = 0.3;  //本例中都取0.2是会得到性质7疯狂降阶的情况，然后通过性质4直接得到了最优解
    public static final double φc = 0.3;
    public static double P;
    public static double C;

    public static void main(String[] args) {
        preHandle();
    }

    public static void preHandle() {
        DecimalFormat decimalFormat = new DecimalFormat("#.00");
        P = Arrays.stream(pi).reduce(0.0, Double::sum) * φp;
        C = Arrays.stream(ci).reduce(0.0, Double::sum) * φc;
        P = Double.parseDouble(decimalFormat.format(P));
        C = Double.parseDouble(decimalFormat.format(C));
        System.out.println("P = " + P);
        System.out.println("C = " + C);
        for (int i = 0; i < pi.length; i++) {
            V.add(new Facility(i + 1, ci[i], pi[i], pi[i] / ci[i]));
        }
    }
}
