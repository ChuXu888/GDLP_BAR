package com.chuxu.BackTrackingAlgorithmWithReduction.part01_preHandleData.RandomCase;

import com.chuxu.entity.Facility;

import java.text.DecimalFormat;
import java.util.Arrays;
import java.util.LinkedHashSet;

public class N40 {
    public static int dimension = 40;
    public static final double[] ci =
            {658.0, 311.0, 1122.0, 1040.0, 611.0, 1166.0, 542.0, 623.0, 281.0, 357.0, 664.0, 276.0, 340.0, 901.0, 995.0, 533.0, 533.0, 645.0, 926.0, 1006.0, 604.0, 752.0, 919.0, 952.0, 847.0, 860.0, 399.0, 324.0, 789.0, 1087.0, 1010.0, 279.0, 1092.0, 530.0, 901.0, 278.0, 600.0, 864.0, 472.0, 720.0};
    public static final double[] pi =
            {496.0, 680.0, 292.0, 1066.0, 407.0, 1113.0, 256.0, 1060.0, 775.0, 1083.0, 276.0, 637.0, 215.0, 686.0, 838.0, 797.0, 334.0, 875.0, 745.0, 431.0, 598.0, 279.0, 822.0, 1145.0, 769.0, 408.0, 657.0, 946.0, 1127.0, 1014.0, 946.0, 291.0, 598.0, 595.0, 856.0, 1142.0, 928.0, 851.0, 295.0, 1137.0};
    public static final LinkedHashSet<Facility> V = new LinkedHashSet<>();
    public static double[][] disMatrix = {
            {0.00, 157.87, 132.65, 117.58, 121.37, 122.20, 131.22, 159.43, 150.10, 151.48, 146.12, 83.95, 135.05, 162.35, 187.09, 133.00, 131.96, 186.01, 138.20, 119.71, 121.03, 159.18, 121.39, 118.66, 100.85, 143.90, 165.56, 171.16, 94.98, 194.21, 104.09, 117.82, 122.74, 169.71, 172.03, 194.60, 171.90, 191.68, 107.97, 126.06},
            {157.87, 0.00, 80.78, 107.01, 121.55, 160.86, 190.75, 148.31, 108.61, 99.90, 147.51, 195.77, 139.71, 186.02, 190.60, 136.85, 195.88, 157.02, 155.19, 184.49, 177.15, 170.19, 179.05, 132.82, 124.83, 166.37, 159.75, 161.21, 177.51, 155.78, 183.11, 103.36, 144.04, 195.16, 83.91, 197.60, 83.07, 127.30, 163.32, 107.67},
            {132.65, 80.78, 0.00, 169.33, 189.27, 194.78, 130.53, 121.06, 164.12, 121.27, 188.17, 160.78, 173.92, 121.49, 115.12, 163.42, 88.12, 161.21, 101.51, 151.12, 131.21, 148.33, 93.53, 103.27, 177.89, 176.10, 168.81, 83.37, 181.29, 148.91, 193.91, 100.73, 111.11, 178.65, 114.21, 125.75, 163.98, 196.65, 143.44, 181.41},
            {117.58, 107.01, 169.33, 0.00, 166.91, 167.73, 111.04, 121.83, 147.36, 197.22, 129.85, 140.17, 110.00, 130.72, 124.80, 103.79, 180.19, 118.42, 175.65, 133.47, 88.08, 92.14, 152.08, 106.95, 154.91, 142.74, 159.20, 93.00, 104.49, 149.22, 144.86, 193.37, 197.77, 98.39, 126.87, 83.71, 177.61, 104.59, 119.18, 182.53},
            {121.37, 121.55, 189.27, 166.91, 0.00, 112.99, 194.03, 90.56, 159.20, 88.90, 136.93, 137.46, 177.10, 157.56, 192.72, 94.74, 97.38, 171.16, 139.71, 123.82, 121.77, 173.41, 190.64, 167.20, 149.39, 178.83, 188.65, 101.44, 143.05, 133.76, 195.97, 157.91, 124.78, 151.97, 188.40, 151.25, 88.02, 150.22, 173.45, 99.87},
            {122.20, 160.86, 194.78, 167.73, 112.99, 0.00, 165.89, 135.74, 138.84, 141.25, 190.09, 177.47, 89.98, 196.62, 114.41, 86.94, 91.41, 145.53, 139.60, 162.19, 126.88, 170.12, 163.07, 129.53, 96.15, 102.27, 107.36, 93.04, 174.24, 133.72, 115.45, 150.67, 109.62, 170.07, 98.96, 158.22, 152.68, 144.04, 126.87, 159.08},
            {131.22, 190.75, 130.53, 111.04, 194.03, 165.89, 0.00, 104.51, 151.54, 167.98, 167.56, 98.21, 176.19, 189.34, 97.50, 171.05, 103.65, 85.93, 185.71, 175.52, 136.51, 93.52, 110.78, 191.03, 83.95, 96.98, 153.19, 95.18, 157.05, 190.68, 141.53, 134.61, 131.80, 95.36, 141.99, 80.29, 125.90, 187.59, 154.95, 140.61},
            {159.43, 148.31, 121.06, 121.83, 90.56, 135.74, 104.51, 0.00, 174.00, 113.49, 162.52, 157.95, 197.85, 197.34, 164.53, 170.56, 173.82, 118.79, 148.55, 101.11, 99.24, 139.09, 100.37, 137.20, 152.91, 147.05, 176.87, 96.18, 111.57, 89.68, 191.90, 117.65, 105.09, 150.48, 168.43, 82.01, 167.83, 139.97, 166.61, 171.90},
            {150.10, 108.61, 164.12, 147.36, 159.20, 138.84, 151.54, 174.00, 0.00, 91.30, 168.26, 147.61, 175.49, 125.95, 139.14, 156.59, 157.03, 115.02, 137.62, 126.43, 189.45, 113.39, 99.66, 114.50, 197.64, 127.23, 133.53, 150.35, 118.24, 107.37, 145.98, 90.91, 102.88, 180.29, 174.70, 112.38, 136.42, 104.62, 119.99, 154.41},
            {151.48, 99.90, 121.27, 197.22, 88.90, 141.25, 167.98, 113.49, 91.30, 0.00, 130.70, 179.80, 84.16, 172.24, 126.10, 105.17, 186.16, 86.45, 129.69, 153.75, 162.18, 127.33, 98.36, 124.23, 89.23, 92.60, 118.90, 188.20, 99.56, 192.09, 144.24, 116.39, 147.61, 81.81, 116.34, 168.61, 189.34, 152.70, 140.73, 86.46},
            {146.12, 147.51, 188.17, 129.85, 136.93, 190.09, 167.56, 162.52, 168.26, 130.70, 0.00, 135.34, 135.53, 176.43, 96.18, 164.72, 133.55, 187.31, 91.03, 155.57, 138.40, 186.88, 98.23, 141.35, 122.47, 138.38, 105.08, 198.55, 172.10, 85.60, 122.06, 131.87, 111.25, 107.15, 117.79, 147.20, 184.22, 107.97, 171.31, 150.58},
            {83.95, 195.77, 160.78, 140.17, 137.46, 177.47, 98.21, 157.95, 147.61, 179.80, 135.34, 0.00, 98.27, 126.52, 131.82, 103.01, 113.86, 105.05, 174.16, 196.44, 189.89, 182.14, 130.23, 95.45, 125.52, 123.10, 162.56, 152.08, 107.44, 183.53, 105.30, 187.76, 153.24, 144.92, 151.69, 147.10, 196.30, 188.33, 153.44, 102.07},
            {135.05, 139.71, 173.92, 110.00, 177.10, 89.98, 176.19, 197.85, 175.49, 84.16, 135.53, 98.27, 0.00, 146.51, 163.53, 98.87, 163.32, 184.10, 145.43, 190.42, 156.90, 159.73, 108.57, 111.17, 90.19, 124.46, 132.31, 191.16, 179.91, 177.01, 135.92, 140.90, 148.17, 193.18, 172.07, 88.21, 168.96, 193.93, 141.09, 118.24},
            {162.35, 186.02, 121.49, 130.72, 157.56, 196.62, 189.34, 197.34, 125.95, 172.24, 176.43, 126.52, 146.51, 0.00, 188.19, 113.53, 185.71, 173.34, 144.38, 148.05, 146.68, 180.18, 125.02, 97.36, 185.00, 116.15, 145.48, 159.77, 124.55, 85.02, 192.58, 178.79, 121.52, 144.25, 154.18, 135.48, 123.05, 171.66, 99.20, 127.09},
            {187.09, 190.60, 115.12, 124.80, 192.72, 114.41, 97.50, 164.53, 139.14, 126.10, 96.18, 131.82, 163.53, 188.19, 0.00, 157.20, 158.98, 118.85, 94.48, 159.89, 132.86, 150.75, 115.62, 112.05, 151.00, 161.22, 91.52, 90.92, 181.73, 119.57, 193.44, 114.32, 149.97, 119.35, 196.69, 175.60, 100.62, 187.29, 116.36, 188.68},
            {133.00, 136.85, 163.42, 103.79, 94.74, 86.94, 171.05, 170.56, 156.59, 105.17, 164.72, 103.01, 98.87, 113.53, 157.20, 0.00, 132.50, 129.75, 184.28, 89.29, 91.69, 159.36, 164.07, 147.85, 102.61, 141.38, 172.43, 163.11, 178.36, 139.40, 120.21, 103.22, 108.95, 124.74, 125.25, 141.59, 96.75, 121.20, 102.00, 139.82},
            {131.96, 195.88, 88.12, 180.19, 97.38, 91.41, 103.65, 173.82, 157.03, 186.16, 133.55, 113.86, 163.32, 185.71, 158.98, 132.50, 0.00, 112.87, 128.92, 119.09, 138.85, 86.58, 186.50, 116.10, 131.15, 131.79, 89.47, 184.78, 103.53, 140.43, 146.36, 167.55, 99.39, 151.83, 160.28, 127.39, 133.09, 100.86, 134.17, 138.44},
            {186.01, 157.02, 161.21, 118.42, 171.16, 145.53, 85.93, 118.79, 115.02, 86.45, 187.31, 105.05, 184.10, 173.34, 118.85, 129.75, 112.87, 0.00, 116.40, 174.10, 92.29, 115.48, 167.87, 144.44, 88.29, 123.03, 91.00, 188.81, 171.97, 101.27, 145.45, 141.98, 172.20, 135.98, 177.98, 141.43, 142.69, 123.67, 165.73, 134.10},
            {138.20, 155.19, 101.51, 175.65, 139.71, 139.60, 185.71, 148.55, 137.62, 129.69, 91.03, 174.16, 145.43, 144.38, 94.48, 184.28, 128.92, 116.40, 0.00, 130.25, 180.58, 174.37, 105.03, 121.80, 95.80, 127.18, 111.52, 166.87, 133.50, 138.31, 183.20, 116.49, 108.69, 124.77, 199.11, 87.27, 132.89, 176.16, 177.61, 171.29},
            {119.71, 184.49, 151.12, 133.47, 123.82, 162.19, 175.52, 101.11, 126.43, 153.75, 155.57, 196.44, 190.42, 148.05, 159.89, 89.29, 119.09, 174.10, 130.25, 0.00, 153.01, 170.08, 92.97, 187.56, 146.56, 133.17, 164.48, 90.34, 110.30, 103.95, 109.90, 92.30, 186.88, 193.30, 154.20, 107.20, 175.74, 122.24, 118.21, 167.41},
            {121.03, 177.15, 131.21, 88.08, 121.77, 126.88, 136.51, 99.24, 189.45, 162.18, 138.40, 189.89, 156.90, 146.68, 132.86, 91.69, 138.85, 92.29, 180.58, 153.01, 0.00, 149.19, 183.52, 158.28, 185.37, 103.91, 85.13, 89.37, 86.50, 80.40, 88.17, 97.92, 102.32, 139.41, 130.41, 159.53, 198.35, 154.53, 108.89, 98.28},
            {159.18, 170.19, 148.33, 92.14, 173.41, 170.12, 93.52, 139.09, 113.39, 127.33, 186.88, 182.14, 159.73, 180.18, 150.75, 159.36, 86.58, 115.48, 174.37, 170.08, 149.19, 0.00, 100.10, 163.94, 101.30, 160.16, 93.88, 141.86, 195.35, 182.87, 115.47, 101.77, 129.14, 167.14, 80.23, 108.48, 82.61, 92.06, 192.52, 95.00},
            {121.39, 179.05, 93.53, 152.08, 190.64, 163.07, 110.78, 100.37, 99.66, 98.36, 98.23, 130.23, 108.57, 125.02, 115.62, 164.07, 186.50, 167.87, 105.03, 92.97, 183.52, 100.10, 0.00, 181.58, 167.33, 140.08, 152.85, 180.20, 100.10, 150.73, 190.66, 136.62, 92.07, 104.25, 136.27, 88.71, 134.78, 91.47, 151.13, 172.95},
            {118.66, 132.82, 103.27, 106.95, 167.20, 129.53, 191.03, 137.20, 114.50, 124.23, 141.35, 95.45, 111.17, 97.36, 112.05, 147.85, 116.10, 144.44, 121.80, 187.56, 158.28, 163.94, 181.58, 0.00, 176.55, 115.35, 153.71, 189.11, 174.00, 115.88, 149.69, 97.23, 194.60, 130.60, 122.05, 140.48, 123.37, 177.14, 142.97, 98.59},
            {100.85, 124.83, 177.89, 154.91, 149.39, 96.15, 83.95, 152.91, 197.64, 89.23, 122.47, 125.52, 90.19, 185.00, 151.00, 102.61, 131.15, 88.29, 95.80, 146.56, 185.37, 101.30, 167.33, 176.55, 0.00, 107.76, 121.80, 132.09, 151.45, 169.21, 180.05, 181.89, 170.87, 138.15, 140.26, 121.40, 120.89, 111.07, 110.90, 112.94},
            {143.90, 166.37, 176.10, 142.74, 178.83, 102.27, 96.98, 147.05, 127.23, 92.60, 138.38, 123.10, 124.46, 116.15, 161.22, 141.38, 131.79, 123.03, 127.18, 133.17, 103.91, 160.16, 140.08, 115.35, 107.76, 0.00, 153.13, 104.24, 164.86, 94.45, 173.32, 167.96, 130.63, 151.38, 88.87, 168.62, 161.06, 106.87, 144.55, 142.62},
            {165.56, 159.75, 168.81, 159.20, 188.65, 107.36, 153.19, 176.87, 133.53, 118.90, 105.08, 162.56, 132.31, 145.48, 91.52, 172.43, 89.47, 91.00, 111.52, 164.48, 85.13, 93.88, 152.85, 153.71, 121.80, 153.13, 0.00, 114.22, 118.30, 154.40, 137.26, 88.93, 100.57, 162.90, 97.91, 189.31, 82.93, 156.81, 119.19, 108.01},
            {171.16, 161.21, 83.37, 93.00, 101.44, 93.04, 95.18, 96.18, 150.35, 188.20, 198.55, 152.08, 191.16, 159.77, 90.92, 163.11, 184.78, 188.81, 166.87, 90.34, 89.37, 141.86, 180.20, 189.11, 132.09, 104.24, 114.22, 0.00, 186.38, 181.58, 89.73, 136.93, 142.30, 192.11, 106.07, 177.27, 80.97, 187.64, 130.43, 107.45},
            {94.98, 177.51, 181.29, 104.49, 143.05, 174.24, 157.05, 111.57, 118.24, 99.56, 172.10, 107.44, 179.91, 124.55, 181.73, 178.36, 103.53, 171.97, 133.50, 110.30, 86.50, 195.35, 100.10, 174.00, 151.45, 164.86, 118.30, 186.38, 0.00, 99.58, 123.89, 140.64, 197.73, 154.73, 83.02, 147.19, 94.61, 193.20, 133.06, 133.46},
            {194.21, 155.78, 148.91, 149.22, 133.76, 133.72, 190.68, 89.68, 107.37, 192.09, 85.60, 183.53, 177.01, 85.02, 119.57, 139.40, 140.43, 101.27, 138.31, 103.95, 80.40, 182.87, 150.73, 115.88, 169.21, 94.45, 154.40, 181.58, 99.58, 0.00, 196.12, 97.38, 183.06, 89.38, 80.61, 98.13, 179.08, 97.08, 197.21, 117.98},
            {104.09, 183.11, 193.91, 144.86, 195.97, 115.45, 141.53, 191.90, 145.98, 144.24, 122.06, 105.30, 135.92, 192.58, 193.44, 120.21, 146.36, 145.45, 183.20, 109.90, 88.17, 115.47, 190.66, 149.69, 180.05, 173.32, 137.26, 89.73, 123.89, 196.12, 0.00, 188.09, 129.30, 155.27, 171.31, 83.20, 156.75, 183.01, 146.09, 153.37},
            {117.82, 103.36, 100.73, 193.37, 157.91, 150.67, 134.61, 117.65, 90.91, 116.39, 131.87, 187.76, 140.90, 178.79, 114.32, 103.22, 167.55, 141.98, 116.49, 92.30, 97.92, 101.77, 136.62, 97.23, 181.89, 167.96, 88.93, 136.93, 140.64, 97.38, 188.09, 0.00, 90.33, 182.25, 182.71, 174.07, 87.18, 86.70, 90.81, 173.09},
            {122.74, 144.04, 111.11, 197.77, 124.78, 109.62, 131.80, 105.09, 102.88, 147.61, 111.25, 153.24, 148.17, 121.52, 149.97, 108.95, 99.39, 172.20, 108.69, 186.88, 102.32, 129.14, 92.07, 194.60, 170.87, 130.63, 100.57, 142.30, 197.73, 183.06, 129.30, 90.33, 0.00, 146.88, 175.18, 163.97, 186.37, 194.22, 159.29, 164.34},
            {169.71, 195.16, 178.65, 98.39, 151.97, 170.07, 95.36, 150.48, 180.29, 81.81, 107.15, 144.92, 193.18, 144.25, 119.35, 124.74, 151.83, 135.98, 124.77, 193.30, 139.41, 167.14, 104.25, 130.60, 138.15, 151.38, 162.90, 192.11, 154.73, 89.38, 155.27, 182.25, 146.88, 0.00, 83.70, 190.26, 176.78, 116.18, 132.77, 110.90},
            {172.03, 83.91, 114.21, 126.87, 188.40, 98.96, 141.99, 168.43, 174.70, 116.34, 117.79, 151.69, 172.07, 154.18, 196.69, 125.25, 160.28, 177.98, 199.11, 154.20, 130.41, 80.23, 136.27, 122.05, 140.26, 88.87, 97.91, 106.07, 83.02, 80.61, 171.31, 182.71, 175.18, 83.70, 0.00, 156.93, 186.90, 162.10, 84.69, 143.95},
            {194.60, 197.60, 125.75, 83.71, 151.25, 158.22, 80.29, 82.01, 112.38, 168.61, 147.20, 147.10, 88.21, 135.48, 175.60, 141.59, 127.39, 141.43, 87.27, 107.20, 159.53, 108.48, 88.71, 140.48, 121.40, 168.62, 189.31, 177.27, 147.19, 98.13, 83.20, 174.07, 163.97, 190.26, 156.93, 0.00, 148.53, 179.73, 147.05, 146.93},
            {171.90, 83.07, 163.98, 177.61, 88.02, 152.68, 125.90, 167.83, 136.42, 189.34, 184.22, 196.30, 168.96, 123.05, 100.62, 96.75, 133.09, 142.69, 132.89, 175.74, 198.35, 82.61, 134.78, 123.37, 120.89, 161.06, 82.93, 80.97, 94.61, 179.08, 156.75, 87.18, 186.37, 176.78, 186.90, 148.53, 0.00, 179.63, 104.18, 187.74},
            {191.68, 127.30, 196.65, 104.59, 150.22, 144.04, 187.59, 139.97, 104.62, 152.70, 107.97, 188.33, 193.93, 171.66, 187.29, 121.20, 100.86, 123.67, 176.16, 122.24, 154.53, 92.06, 91.47, 177.14, 111.07, 106.87, 156.81, 187.64, 193.20, 97.08, 183.01, 86.70, 194.22, 116.18, 162.10, 179.73, 179.63, 0.00, 131.69, 129.65},
            {107.97, 163.32, 143.44, 119.18, 173.45, 126.87, 154.95, 166.61, 119.99, 140.73, 171.31, 153.44, 141.09, 99.20, 116.36, 102.00, 134.17, 165.73, 177.61, 118.21, 108.89, 192.52, 151.13, 142.97, 110.90, 144.55, 119.19, 130.43, 133.06, 197.21, 146.09, 90.81, 159.29, 132.77, 84.69, 147.05, 104.18, 131.69, 0.00, 187.69},
            {126.06, 107.67, 181.41, 182.53, 99.87, 159.08, 140.61, 171.90, 154.41, 86.46, 150.58, 102.07, 118.24, 127.09, 188.68, 139.82, 138.44, 134.10, 171.29, 167.41, 98.28, 95.00, 172.95, 98.59, 112.94, 142.62, 108.01, 107.45, 133.46, 117.98, 153.37, 173.09, 164.34, 110.90, 143.95, 146.93, 187.74, 129.65, 187.69, 0.00},
    };
    public static final double φp = 0.3;  //本例中都取0.2是会得到性质7疯狂降阶的情况，然后通过性质4直接得到了最优解
    public static final double φc = 0.3;
    public static double P;
    public static double C;

    public static void main(String[] args) {
        preHandle();
    }

    public static void preHandle() {
        DecimalFormat decimalFormat = new DecimalFormat("#.00");
        P = Arrays.stream(pi).reduce(0.0, Double::sum) * φp;
        C = Arrays.stream(ci).reduce(0.0, Double::sum) * φc;
        P = Double.parseDouble(decimalFormat.format(P));
        C = Double.parseDouble(decimalFormat.format(C));
        System.out.println("P = " + P);
        System.out.println("C = " + C);
        for (int i = 0; i < pi.length; i++) {
            V.add(new Facility(i + 1, ci[i], pi[i], pi[i] / ci[i]));
        }
    }
}
