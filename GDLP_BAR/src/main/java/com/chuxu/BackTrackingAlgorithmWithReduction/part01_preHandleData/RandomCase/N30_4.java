package com.chuxu.BackTrackingAlgorithmWithReduction.part01_preHandleData.RandomCase;

import com.chuxu.entity.Facility;

import java.text.DecimalFormat;
import java.util.Arrays;
import java.util.LinkedHashSet;

public class N30_4 {
    public static int dimension = 30;
    public static final double[] ci =
            {323.0, 1127.0, 878.0, 558.0, 413.0, 554.0, 1027.0, 418.0, 1176.0, 290.0, 923.0, 1007.0, 462.0, 750.0, 777.0, 1017.0, 956.0, 1007.0, 468.0, 215.0, 217.0, 873.0, 218.0, 489.0, 269.0, 928.0, 647.0, 697.0, 844.0, 1197.0};
    public static final double[] pi =
            {340.0, 365.0, 275.0, 323.0, 288.0, 292.0, 653.0, 621.0, 398.0, 1158.0, 837.0, 320.0, 506.0, 664.0, 711.0, 768.0, 649.0, 845.0, 994.0, 251.0, 748.0, 988.0, 456.0, 943.0, 941.0, 853.0, 908.0, 255.0, 927.0, 1124.0};
    public static final LinkedHashSet<Facility> V = new LinkedHashSet<>();
    public static double[][] disMatrix = {
            {0.00, 193.54, 150.35, 129.35, 144.99, 132.37, 181.69, 111.87, 193.92, 137.53, 146.72, 132.36, 150.34, 147.35, 83.65, 177.36, 83.91, 84.26, 162.16, 115.06, 137.64, 86.43, 168.45, 193.87, 156.41, 152.84, 145.51, 185.75, 145.42, 127.00},
            {193.54, 0.00, 122.00, 174.80, 99.35, 123.39, 104.23, 162.35, 131.16, 173.28, 190.22, 184.21, 80.94, 113.15, 193.86, 113.87, 180.84, 198.78, 99.07, 157.78, 91.19, 82.12, 160.05, 114.18, 105.80, 155.64, 83.75, 126.74, 111.22, 130.17},
            {150.35, 122.00, 0.00, 113.70, 157.30, 175.12, 107.41, 142.39, 129.22, 113.07, 97.18, 89.61, 133.33, 81.16, 191.99, 139.79, 83.17, 123.13, 128.03, 189.20, 154.39, 106.63, 171.60, 176.70, 165.06, 132.12, 174.11, 137.62, 109.64, 90.76},
            {129.35, 174.80, 113.70, 0.00, 156.23, 189.94, 108.55, 144.63, 153.06, 115.91, 118.72, 102.81, 157.64, 179.13, 187.47, 91.05, 118.52, 198.51, 102.73, 160.82, 120.26, 85.14, 197.18, 195.07, 181.51, 196.65, 82.06, 83.50, 186.01, 176.06},
            {144.99, 99.35, 157.30, 156.23, 0.00, 98.57, 139.49, 195.27, 178.14, 80.19, 113.31, 139.58, 185.94, 139.07, 83.56, 85.22, 163.99, 102.77, 98.63, 130.95, 161.79, 94.56, 134.53, 175.69, 172.23, 91.18, 93.12, 121.86, 124.50, 186.81},
            {132.37, 123.39, 175.12, 189.94, 98.57, 0.00, 186.68, 175.33, 129.62, 139.69, 100.02, 92.97, 118.84, 140.32, 150.52, 192.69, 161.47, 95.60, 199.57, 198.41, 98.28, 192.94, 145.34, 103.89, 120.27, 91.46, 167.43, 84.38, 199.99, 104.54},
            {181.69, 104.23, 107.41, 108.55, 139.49, 186.68, 0.00, 138.01, 103.91, 123.40, 108.63, 122.04, 98.69, 195.42, 157.76, 100.88, 143.45, 180.50, 181.39, 168.90, 187.73, 172.10, 135.28, 112.01, 182.80, 140.98, 120.82, 159.87, 107.79, 91.92},
            {111.87, 162.35, 142.39, 144.63, 195.27, 175.33, 138.01, 0.00, 87.64, 90.38, 104.69, 142.08, 187.70, 115.18, 167.29, 101.58, 135.97, 89.37, 197.67, 87.91, 93.57, 86.45, 186.80, 140.46, 183.76, 181.19, 151.87, 80.16, 99.29, 188.44},
            {193.92, 131.16, 129.22, 153.06, 178.14, 129.62, 103.91, 87.64, 0.00, 153.40, 181.58, 81.92, 195.45, 178.71, 150.61, 90.16, 117.58, 196.24, 190.97, 101.37, 84.70, 96.42, 196.19, 96.99, 145.28, 179.91, 120.96, 157.30, 159.98, 173.00},
            {137.53, 173.28, 113.07, 115.91, 80.19, 139.69, 123.40, 90.38, 153.40, 0.00, 86.96, 122.19, 83.97, 82.43, 162.94, 99.47, 109.31, 108.39, 187.44, 160.21, 193.80, 194.49, 194.90, 172.56, 182.14, 127.48, 161.80, 131.48, 108.03, 86.78},
            {146.72, 190.22, 97.18, 118.72, 113.31, 100.02, 108.63, 104.69, 181.58, 86.96, 0.00, 149.41, 181.00, 152.62, 145.86, 83.37, 199.12, 165.01, 121.95, 177.29, 122.34, 104.85, 199.83, 99.01, 167.54, 84.83, 198.12, 112.70, 163.47, 152.82},
            {132.36, 184.21, 89.61, 102.81, 139.58, 92.97, 122.04, 142.08, 81.92, 122.19, 149.41, 0.00, 82.44, 88.63, 172.31, 158.42, 160.50, 174.81, 143.85, 198.30, 117.44, 190.51, 100.36, 187.32, 107.95, 191.85, 140.04, 139.35, 112.58, 92.83},
            {150.34, 80.94, 133.33, 157.64, 185.94, 118.84, 98.69, 187.70, 195.45, 83.97, 181.00, 82.44, 0.00, 129.84, 81.83, 171.06, 182.73, 175.68, 132.69, 164.23, 181.79, 128.77, 175.74, 88.69, 121.82, 191.14, 182.72, 174.93, 106.98, 121.82},
            {147.35, 113.15, 81.16, 179.13, 139.07, 140.32, 195.42, 115.18, 178.71, 82.43, 152.62, 88.63, 129.84, 0.00, 185.38, 139.43, 102.43, 97.15, 160.19, 135.51, 194.25, 104.27, 91.23, 94.89, 104.29, 126.50, 183.59, 133.71, 126.72, 152.50},
            {83.65, 193.86, 191.99, 187.47, 83.56, 150.52, 157.76, 167.29, 150.61, 162.94, 145.86, 172.31, 81.83, 185.38, 0.00, 129.77, 91.49, 160.66, 168.09, 126.09, 160.77, 144.28, 130.25, 113.75, 147.38, 190.37, 157.63, 161.07, 177.95, 82.18},
            {177.36, 113.87, 139.79, 91.05, 85.22, 192.69, 100.88, 101.58, 90.16, 99.47, 83.37, 158.42, 171.06, 139.43, 129.77, 0.00, 119.70, 128.75, 121.36, 110.49, 149.03, 89.23, 94.48, 118.99, 96.78, 124.07, 140.41, 154.83, 160.86, 140.19},
            {83.91, 180.84, 83.17, 118.52, 163.99, 161.47, 143.45, 135.97, 117.58, 109.31, 199.12, 160.50, 182.73, 102.43, 91.49, 119.70, 0.00, 178.79, 174.64, 159.81, 145.80, 112.55, 153.98, 161.99, 91.58, 174.79, 88.73, 130.77, 110.14, 91.81},
            {84.26, 198.78, 123.13, 198.51, 102.77, 95.60, 180.50, 89.37, 196.24, 108.39, 165.01, 174.81, 175.68, 97.15, 160.66, 128.75, 178.79, 0.00, 162.17, 110.74, 178.64, 104.68, 99.85, 138.28, 84.99, 172.01, 166.59, 111.63, 97.11, 130.31},
            {162.16, 99.07, 128.03, 102.73, 98.63, 199.57, 181.39, 197.67, 190.97, 187.44, 121.95, 143.85, 132.69, 160.19, 168.09, 121.36, 174.64, 162.17, 0.00, 96.23, 101.70, 157.55, 176.01, 124.41, 184.01, 112.71, 114.58, 98.12, 145.45, 196.18},
            {115.06, 157.78, 189.20, 160.82, 130.95, 198.41, 168.90, 87.91, 101.37, 160.21, 177.29, 198.30, 164.23, 135.51, 126.09, 110.49, 159.81, 110.74, 96.23, 0.00, 157.24, 163.30, 126.87, 159.80, 154.73, 142.61, 162.73, 84.28, 120.13, 90.51},
            {137.64, 91.19, 154.39, 120.26, 161.79, 98.28, 187.73, 93.57, 84.70, 193.80, 122.34, 117.44, 181.79, 194.25, 160.77, 149.03, 145.80, 178.64, 101.70, 157.24, 0.00, 113.91, 162.47, 149.14, 171.07, 138.00, 194.28, 156.28, 146.42, 163.11},
            {86.43, 82.12, 106.63, 85.14, 94.56, 192.94, 172.10, 86.45, 96.42, 194.49, 104.85, 190.51, 128.77, 104.27, 144.28, 89.23, 112.55, 104.68, 157.55, 163.30, 113.91, 0.00, 160.93, 89.48, 189.94, 107.32, 99.64, 182.96, 167.61, 135.14},
            {168.45, 160.05, 171.60, 197.18, 134.53, 145.34, 135.28, 186.80, 196.19, 194.90, 199.83, 100.36, 175.74, 91.23, 130.25, 94.48, 153.98, 99.85, 176.01, 126.87, 162.47, 160.93, 0.00, 176.11, 159.81, 165.13, 105.77, 152.86, 180.75, 115.20},
            {193.87, 114.18, 176.70, 195.07, 175.69, 103.89, 112.01, 140.46, 96.99, 172.56, 99.01, 187.32, 88.69, 94.89, 113.75, 118.99, 161.99, 138.28, 124.41, 159.80, 149.14, 89.48, 176.11, 0.00, 144.71, 135.56, 114.39, 100.65, 121.31, 147.45},
            {156.41, 105.80, 165.06, 181.51, 172.23, 120.27, 182.80, 183.76, 145.28, 182.14, 167.54, 107.95, 121.82, 104.29, 147.38, 96.78, 91.58, 84.99, 184.01, 154.73, 171.07, 189.94, 159.81, 144.71, 0.00, 176.99, 153.90, 99.10, 93.55, 195.98},
            {152.84, 155.64, 132.12, 196.65, 91.18, 91.46, 140.98, 181.19, 179.91, 127.48, 84.83, 191.85, 191.14, 126.50, 190.37, 124.07, 174.79, 172.01, 112.71, 142.61, 138.00, 107.32, 165.13, 135.56, 176.99, 0.00, 181.80, 104.07, 111.90, 91.80},
            {145.51, 83.75, 174.11, 82.06, 93.12, 167.43, 120.82, 151.87, 120.96, 161.80, 198.12, 140.04, 182.72, 183.59, 157.63, 140.41, 88.73, 166.59, 114.58, 162.73, 194.28, 99.64, 105.77, 114.39, 153.90, 181.80, 0.00, 177.03, 108.12, 168.27},
            {185.75, 126.74, 137.62, 83.50, 121.86, 84.38, 159.87, 80.16, 157.30, 131.48, 112.70, 139.35, 174.93, 133.71, 161.07, 154.83, 130.77, 111.63, 98.12, 84.28, 156.28, 182.96, 152.86, 100.65, 99.10, 104.07, 177.03, 0.00, 126.24, 173.57},
            {145.42, 111.22, 109.64, 186.01, 124.50, 199.99, 107.79, 99.29, 159.98, 108.03, 163.47, 112.58, 106.98, 126.72, 177.95, 160.86, 110.14, 97.11, 145.45, 120.13, 146.42, 167.61, 180.75, 121.31, 93.55, 111.90, 108.12, 126.24, 0.00, 110.50},
            {127.00, 130.17, 90.76, 176.06, 186.81, 104.54, 91.92, 188.44, 173.00, 86.78, 152.82, 92.83, 121.82, 152.50, 82.18, 140.19, 91.81, 130.31, 196.18, 90.51, 163.11, 135.14, 115.20, 147.45, 195.98, 91.80, 168.27, 173.57, 110.50, 0.00},
    };
    public static final double φp = 0.3;  //本例中都取0.2是会得到性质7疯狂降阶的情况，然后通过性质4直接得到了最优解
    public static final double φc = 0.3;
    public static double P;
    public static double C;

    public static void main(String[] args) {
        preHandle();
    }

    public static void preHandle() {
        DecimalFormat decimalFormat = new DecimalFormat("#.00");
        P = Arrays.stream(pi).reduce(0.0, Double::sum) * φp;
        C = Arrays.stream(ci).reduce(0.0, Double::sum) * φc;
        P = Double.parseDouble(decimalFormat.format(P));
        C = Double.parseDouble(decimalFormat.format(C));
        System.out.println("P = " + P);
        System.out.println("C = " + C);
        for (int i = 0; i < pi.length; i++) {
            V.add(new Facility(i + 1, ci[i], pi[i], pi[i] / ci[i]));
        }
    }
}
