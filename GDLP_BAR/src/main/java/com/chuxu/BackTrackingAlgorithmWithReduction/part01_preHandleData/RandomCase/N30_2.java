package com.chuxu.BackTrackingAlgorithmWithReduction.part01_preHandleData.RandomCase;

import com.chuxu.entity.Facility;

import java.text.DecimalFormat;
import java.util.Arrays;
import java.util.LinkedHashSet;

public class N30_2 {
    public static int dimension = 30;
    public static final double[] ci =
            {1198.0, 457.0, 426.0, 502.0, 548.0, 621.0, 953.0, 797.0, 325.0, 1088.0, 947.0, 904.0, 970.0, 1185.0, 564.0, 1006.0, 771.0, 524.0, 314.0, 341.0, 246.0, 1074.0, 696.0, 1000.0, 664.0, 541.0, 990.0, 615.0, 976.0, 890.0};
    public static final double[] pi =
            {787.0, 376.0, 730.0, 565.0, 824.0, 839.0, 685.0, 538.0, 1182.0, 1098.0, 424.0, 328.0, 1065.0, 501.0, 442.0, 398.0, 272.0, 1109.0, 882.0, 552.0, 989.0, 211.0, 323.0, 1096.0, 619.0, 527.0, 689.0, 752.0, 758.0, 941.0};
    public static final LinkedHashSet<Facility> V = new LinkedHashSet<>();
    public static double[][] disMatrix = {
            {0.00, 88.50, 142.63, 190.22, 142.32, 144.23, 158.95, 175.20, 199.99, 112.56, 163.30, 127.17, 95.11, 192.27, 130.20, 98.54, 144.94, 144.08, 199.74, 144.92, 145.47, 150.05, 104.12, 137.33, 91.89, 108.02, 162.30, 141.02, 136.38, 82.04},
            {88.50, 0.00, 169.68, 195.64, 153.39, 180.68, 116.98, 184.06, 187.12, 199.66, 184.59, 143.59, 124.60, 143.01, 153.90, 173.38, 130.11, 189.68, 176.45, 145.80, 92.66, 117.56, 104.38, 96.85, 138.01, 156.92, 112.80, 172.62, 140.46, 158.12},
            {142.63, 169.68, 0.00, 134.64, 103.31, 96.70, 185.67, 83.03, 85.60, 195.20, 151.37, 154.15, 116.58, 109.50, 113.81, 165.06, 159.01, 142.12, 199.64, 86.51, 187.48, 108.17, 184.09, 119.95, 129.24, 114.08, 124.11, 80.86, 170.90, 176.07},
            {190.22, 195.64, 134.64, 0.00, 146.55, 167.14, 173.60, 177.27, 117.65, 131.81, 104.39, 99.05, 176.50, 163.50, 170.40, 103.59, 166.42, 165.85, 175.07, 169.45, 162.16, 179.11, 101.92, 190.18, 89.61, 122.16, 151.65, 138.80, 186.21, 92.66},
            {142.32, 153.39, 103.31, 146.55, 0.00, 172.08, 156.56, 156.38, 185.89, 108.14, 84.50, 135.50, 179.48, 80.44, 139.81, 109.36, 161.74, 96.11, 146.15, 123.07, 135.29, 164.37, 158.38, 93.81, 126.00, 172.11, 196.84, 196.79, 128.41, 190.90},
            {144.23, 180.68, 96.70, 167.14, 172.08, 0.00, 84.77, 181.69, 84.76, 177.05, 184.99, 118.75, 183.55, 130.27, 157.82, 129.97, 116.56, 134.13, 112.13, 149.63, 110.22, 192.57, 174.90, 82.21, 107.16, 122.29, 82.09, 82.40, 178.46, 199.44},
            {158.95, 116.98, 185.67, 173.60, 156.56, 84.77, 0.00, 94.48, 192.80, 134.60, 191.56, 167.15, 159.37, 135.16, 192.44, 129.66, 182.92, 192.47, 197.32, 106.48, 96.91, 183.77, 129.84, 122.99, 107.61, 129.28, 180.05, 82.52, 152.11, 140.33},
            {175.20, 184.06, 83.03, 177.27, 156.38, 181.69, 94.48, 0.00, 153.48, 183.16, 163.01, 111.98, 147.30, 130.56, 155.48, 88.99, 177.52, 153.94, 153.16, 151.63, 184.62, 87.20, 144.02, 129.79, 100.76, 195.94, 105.32, 139.05, 172.17, 92.97},
            {199.99, 187.12, 85.60, 117.65, 185.89, 84.76, 192.80, 153.48, 0.00, 138.80, 81.70, 174.18, 111.53, 193.35, 188.55, 93.68, 134.70, 121.28, 154.03, 125.57, 113.50, 198.13, 157.67, 154.59, 143.10, 92.64, 148.98, 112.81, 127.90, 84.27},
            {112.56, 199.66, 195.20, 131.81, 108.14, 177.05, 134.60, 183.16, 138.80, 0.00, 120.89, 195.95, 150.93, 130.30, 188.49, 127.59, 151.48, 182.52, 125.25, 80.93, 167.38, 145.86, 108.15, 141.33, 134.26, 96.76, 105.91, 120.51, 173.92, 158.62},
            {163.30, 184.59, 151.37, 104.39, 84.50, 184.99, 191.56, 163.01, 81.70, 120.89, 0.00, 91.40, 194.90, 167.64, 165.14, 149.60, 155.24, 197.31, 129.01, 106.70, 144.05, 108.62, 94.39, 123.86, 139.65, 85.10, 106.09, 180.85, 122.04, 80.47},
            {127.17, 143.59, 154.15, 99.05, 135.50, 118.75, 167.15, 111.98, 174.18, 195.95, 91.40, 0.00, 96.48, 120.16, 186.10, 199.11, 153.28, 91.40, 171.31, 80.37, 167.04, 188.78, 94.79, 192.40, 146.67, 90.99, 166.02, 194.58, 134.57, 153.42},
            {95.11, 124.60, 116.58, 176.50, 179.48, 183.55, 159.37, 147.30, 111.53, 150.93, 194.90, 96.48, 0.00, 106.55, 145.17, 169.98, 106.72, 96.87, 191.45, 139.77, 83.58, 85.33, 85.04, 100.56, 167.52, 100.30, 172.84, 154.18, 112.59, 126.89},
            {192.27, 143.01, 109.50, 163.50, 80.44, 130.27, 135.16, 130.56, 193.35, 130.30, 167.64, 120.16, 106.55, 0.00, 187.22, 130.46, 162.36, 123.44, 154.37, 177.29, 119.30, 100.53, 140.03, 156.95, 182.41, 106.76, 195.10, 141.49, 181.44, 100.55},
            {130.20, 153.90, 113.81, 170.40, 139.81, 157.82, 192.44, 155.48, 188.55, 188.49, 165.14, 186.10, 145.17, 187.22, 0.00, 151.18, 86.56, 90.06, 156.08, 86.83, 143.86, 98.54, 94.21, 100.40, 127.07, 107.77, 85.56, 163.81, 94.23, 152.42},
            {98.54, 173.38, 165.06, 103.59, 109.36, 129.97, 129.66, 88.99, 93.68, 127.59, 149.60, 199.11, 169.98, 130.46, 151.18, 0.00, 82.81, 93.75, 171.42, 169.66, 143.60, 143.12, 178.62, 143.23, 82.63, 185.16, 167.89, 129.00, 83.08, 136.23},
            {144.94, 130.11, 159.01, 166.42, 161.74, 116.56, 182.92, 177.52, 134.70, 151.48, 155.24, 153.28, 106.72, 162.36, 86.56, 82.81, 0.00, 87.26, 128.96, 102.59, 180.70, 160.86, 184.28, 127.95, 82.26, 146.48, 86.49, 85.12, 110.93, 156.12},
            {144.08, 189.68, 142.12, 165.85, 96.11, 134.13, 192.47, 153.94, 121.28, 182.52, 197.31, 91.40, 96.87, 123.44, 90.06, 93.75, 87.26, 0.00, 197.13, 97.72, 123.39, 83.64, 181.99, 167.17, 186.91, 115.21, 84.82, 181.55, 152.80, 184.36},
            {199.74, 176.45, 199.64, 175.07, 146.15, 112.13, 197.32, 153.16, 154.03, 125.25, 129.01, 171.31, 191.45, 154.37, 156.08, 171.42, 128.96, 197.13, 0.00, 128.81, 87.88, 165.33, 172.80, 140.41, 163.80, 155.78, 151.19, 100.69, 199.87, 118.12},
            {144.92, 145.80, 86.51, 169.45, 123.07, 149.63, 106.48, 151.63, 125.57, 80.93, 106.70, 80.37, 139.77, 177.29, 86.83, 169.66, 102.59, 97.72, 128.81, 0.00, 121.52, 163.59, 172.59, 114.35, 123.02, 178.36, 90.59, 192.13, 118.27, 155.04},
            {145.47, 92.66, 187.48, 162.16, 135.29, 110.22, 96.91, 184.62, 113.50, 167.38, 144.05, 167.04, 83.58, 119.30, 143.86, 143.60, 180.70, 123.39, 87.88, 121.52, 0.00, 173.25, 195.80, 184.45, 137.45, 90.70, 94.35, 156.38, 197.28, 138.28},
            {150.05, 117.56, 108.17, 179.11, 164.37, 192.57, 183.77, 87.20, 198.13, 145.86, 108.62, 188.78, 85.33, 100.53, 98.54, 143.12, 160.86, 83.64, 165.33, 163.59, 173.25, 0.00, 175.89, 124.24, 95.62, 176.06, 148.00, 197.72, 175.22, 95.47},
            {104.12, 104.38, 184.09, 101.92, 158.38, 174.90, 129.84, 144.02, 157.67, 108.15, 94.39, 94.79, 85.04, 140.03, 94.21, 178.62, 184.28, 181.99, 172.80, 172.59, 195.80, 175.89, 0.00, 196.82, 152.20, 167.06, 160.02, 155.13, 129.10, 138.99},
            {137.33, 96.85, 119.95, 190.18, 93.81, 82.21, 122.99, 129.79, 154.59, 141.33, 123.86, 192.40, 100.56, 156.95, 100.40, 143.23, 127.95, 167.17, 140.41, 114.35, 184.45, 124.24, 196.82, 0.00, 126.15, 190.73, 193.59, 182.12, 182.87, 131.09},
            {91.89, 138.01, 129.24, 89.61, 126.00, 107.16, 107.61, 100.76, 143.10, 134.26, 139.65, 146.67, 167.52, 182.41, 127.07, 82.63, 82.26, 186.91, 163.80, 123.02, 137.45, 95.62, 152.20, 126.15, 0.00, 177.07, 102.38, 174.98, 129.05, 90.39},
            {108.02, 156.92, 114.08, 122.16, 172.11, 122.29, 129.28, 195.94, 92.64, 96.76, 85.10, 90.99, 100.30, 106.76, 107.77, 185.16, 146.48, 115.21, 155.78, 178.36, 90.70, 176.06, 167.06, 190.73, 177.07, 0.00, 80.13, 175.07, 166.37, 165.40},
            {162.30, 112.80, 124.11, 151.65, 196.84, 82.09, 180.05, 105.32, 148.98, 105.91, 106.09, 166.02, 172.84, 195.10, 85.56, 167.89, 86.49, 84.82, 151.19, 90.59, 94.35, 148.00, 160.02, 193.59, 102.38, 80.13, 0.00, 139.62, 163.23, 168.20},
            {141.02, 172.62, 80.86, 138.80, 196.79, 82.40, 82.52, 139.05, 112.81, 120.51, 180.85, 194.58, 154.18, 141.49, 163.81, 129.00, 85.12, 181.55, 100.69, 192.13, 156.38, 197.72, 155.13, 182.12, 174.98, 175.07, 139.62, 0.00, 188.55, 173.47},
            {136.38, 140.46, 170.90, 186.21, 128.41, 178.46, 152.11, 172.17, 127.90, 173.92, 122.04, 134.57, 112.59, 181.44, 94.23, 83.08, 110.93, 152.80, 199.87, 118.27, 197.28, 175.22, 129.10, 182.87, 129.05, 166.37, 163.23, 188.55, 0.00, 120.93},
            {82.04, 158.12, 176.07, 92.66, 190.90, 199.44, 140.33, 92.97, 84.27, 158.62, 80.47, 153.42, 126.89, 100.55, 152.42, 136.23, 156.12, 184.36, 118.12, 155.04, 138.28, 95.47, 138.99, 131.09, 90.39, 165.40, 168.20, 173.47, 120.93, 0.00},
    };
    public static final double φp = 0.3;  //本例中都取0.2是会得到性质7疯狂降阶的情况，然后通过性质4直接得到了最优解
    public static final double φc = 0.3;
    public static double P;
    public static double C;

    public static void main(String[] args) {
        preHandle();
    }

    public static void preHandle() {
        DecimalFormat decimalFormat = new DecimalFormat("#.00");
        P = Arrays.stream(pi).reduce(0.0, Double::sum) * φp;
        C = Arrays.stream(ci).reduce(0.0, Double::sum) * φc;
        P = Double.parseDouble(decimalFormat.format(P));
        C = Double.parseDouble(decimalFormat.format(C));
        System.out.println("P = " + P);
        System.out.println("C = " + C);
        for (int i = 0; i < pi.length; i++) {
            V.add(new Facility(i + 1, ci[i], pi[i], pi[i] / ci[i]));
        }
    }
}
