package com.chuxu.BackTrackingAlgorithmWithReduction.part01_preHandleData.RandomCase;

import com.chuxu.entity.Facility;

import java.text.DecimalFormat;
import java.util.Arrays;
import java.util.LinkedHashSet;

public class N32_2 {
    public static int dimension = 32;
    public static final double[] ci =
            {590.0, 636.0, 490.0, 211.0, 1100.0, 1100.0, 276.0, 339.0, 659.0, 995.0, 816.0, 278.0, 523.0, 561.0, 1097.0, 983.0, 1037.0, 553.0, 1095.0, 679.0, 452.0, 669.0, 962.0, 1100.0, 230.0, 739.0, 1028.0, 331.0, 730.0, 412.0, 802.0, 1191.0};
    public static final double[] pi =
            {767.0, 815.0, 547.0, 437.0, 844.0, 655.0, 624.0, 464.0, 438.0, 906.0, 1019.0, 715.0, 1134.0, 205.0, 799.0, 852.0, 1129.0, 592.0, 665.0, 370.0, 326.0, 747.0, 216.0, 551.0, 718.0, 905.0, 240.0, 720.0, 362.0, 447.0, 393.0, 1083.0};
    public static final LinkedHashSet<Facility> V = new LinkedHashSet<>();
    public static double[][] disMatrix = {
            {0.00, 146.23, 100.61, 102.24, 105.03, 147.92, 101.88, 159.85, 176.92, 118.56, 184.09, 116.85, 184.42, 121.58, 90.54, 170.68, 190.00, 102.57, 198.12, 87.80, 112.81, 129.50, 179.10, 197.51, 115.06, 101.97, 175.68, 186.58, 176.37, 144.99, 199.16, 119.61},
            {146.23, 0.00, 165.09, 180.45, 115.75, 199.95, 132.31, 180.63, 114.26, 148.72, 114.58, 193.53, 168.55, 117.02, 155.67, 148.37, 188.41, 116.69, 105.55, 102.37, 97.52, 139.77, 186.51, 176.34, 105.52, 194.95, 131.68, 146.48, 193.79, 181.24, 100.52, 194.07},
            {100.61, 165.09, 0.00, 190.20, 124.96, 158.65, 181.87, 88.41, 145.56, 156.10, 147.82, 110.32, 188.93, 108.64, 161.50, 97.96, 154.15, 120.72, 197.75, 191.99, 99.98, 166.86, 164.59, 168.85, 152.19, 189.64, 158.64, 187.14, 180.99, 98.19, 91.73, 155.97},
            {102.24, 180.45, 190.20, 0.00, 159.64, 119.97, 115.95, 84.46, 111.37, 131.85, 132.25, 160.92, 181.00, 112.92, 98.81, 144.00, 150.90, 122.05, 140.80, 165.59, 138.11, 167.36, 81.77, 125.88, 179.94, 82.65, 169.69, 146.23, 100.07, 177.56, 176.96, 113.71},
            {105.03, 115.75, 124.96, 159.64, 0.00, 85.20, 183.71, 113.80, 83.75, 154.60, 198.08, 188.42, 83.12, 130.24, 128.02, 174.78, 155.58, 135.06, 88.85, 130.34, 195.78, 100.00, 135.44, 161.19, 104.54, 167.28, 183.34, 100.80, 109.53, 118.54, 153.09, 111.36},
            {147.92, 199.95, 158.65, 119.97, 85.20, 0.00, 170.31, 150.47, 92.77, 92.92, 185.06, 189.20, 179.46, 195.72, 118.88, 156.46, 109.49, 115.00, 179.42, 96.39, 180.15, 165.15, 135.38, 161.35, 102.24, 181.38, 167.16, 138.26, 143.45, 82.33, 175.99, 194.04},
            {101.88, 132.31, 181.87, 115.95, 183.71, 170.31, 0.00, 186.45, 125.83, 179.26, 189.51, 133.68, 142.57, 164.13, 95.52, 162.57, 179.07, 120.51, 143.37, 110.12, 180.98, 86.54, 153.48, 145.21, 162.24, 115.70, 132.26, 149.68, 92.61, 154.79, 186.22, 156.22},
            {159.85, 180.63, 88.41, 84.46, 113.80, 150.47, 186.45, 0.00, 97.96, 145.19, 156.08, 181.14, 142.43, 147.47, 80.17, 84.68, 150.78, 140.20, 97.51, 169.07, 171.61, 198.75, 135.27, 126.63, 118.60, 178.44, 173.49, 155.20, 97.09, 168.63, 82.32, 167.70},
            {176.92, 114.26, 145.56, 111.37, 83.75, 92.77, 125.83, 97.96, 0.00, 167.00, 90.41, 102.06, 195.44, 171.01, 160.44, 106.66, 81.41, 87.95, 96.92, 93.83, 140.33, 96.72, 101.04, 162.29, 186.29, 154.81, 168.31, 87.37, 196.96, 88.13, 169.07, 130.65},
            {118.56, 148.72, 156.10, 131.85, 154.60, 92.92, 179.26, 145.19, 167.00, 0.00, 174.65, 195.25, 145.71, 157.49, 120.41, 149.16, 166.95, 168.41, 136.07, 133.81, 175.03, 135.97, 192.49, 119.85, 161.92, 138.29, 128.50, 125.85, 193.93, 113.62, 95.95, 186.05},
            {184.09, 114.58, 147.82, 132.25, 198.08, 185.06, 189.51, 156.08, 90.41, 174.65, 0.00, 191.57, 167.28, 179.98, 114.61, 122.39, 163.17, 101.97, 139.26, 99.53, 86.43, 113.95, 113.02, 157.22, 172.06, 139.02, 143.43, 116.52, 96.45, 181.13, 142.12, 121.15},
            {116.85, 193.53, 110.32, 160.92, 188.42, 189.20, 133.68, 181.14, 102.06, 195.25, 191.57, 0.00, 104.32, 140.96, 155.35, 192.47, 113.24, 150.85, 107.66, 86.79, 80.90, 182.45, 95.44, 195.01, 197.72, 184.95, 166.74, 86.03, 177.52, 139.48, 135.59, 119.89},
            {184.42, 168.55, 188.93, 181.00, 83.12, 179.46, 142.57, 142.43, 195.44, 145.71, 167.28, 104.32, 0.00, 184.10, 127.10, 126.06, 105.34, 109.36, 83.23, 140.84, 88.75, 130.76, 110.52, 163.63, 157.39, 81.77, 124.97, 91.52, 179.77, 128.09, 137.13, 155.59},
            {121.58, 117.02, 108.64, 112.92, 130.24, 195.72, 164.13, 147.47, 171.01, 157.49, 179.98, 140.96, 184.10, 0.00, 129.56, 156.21, 140.14, 102.64, 166.57, 187.32, 151.07, 199.87, 99.65, 190.66, 189.54, 127.27, 110.92, 124.82, 119.53, 158.39, 159.45, 163.69},
            {90.54, 155.67, 161.50, 98.81, 128.02, 118.88, 95.52, 80.17, 160.44, 120.41, 114.61, 155.35, 127.10, 129.56, 0.00, 85.56, 180.57, 144.73, 105.79, 143.84, 149.60, 136.44, 121.46, 181.45, 151.15, 86.66, 141.82, 173.94, 112.95, 114.30, 96.81, 91.57},
            {170.68, 148.37, 97.96, 144.00, 174.78, 156.46, 162.57, 84.68, 106.66, 149.16, 122.39, 192.47, 126.06, 156.21, 85.56, 0.00, 96.65, 169.00, 106.35, 128.97, 197.15, 162.46, 139.70, 120.70, 150.05, 100.20, 182.36, 177.14, 153.78, 115.41, 148.19, 130.18},
            {190.00, 188.41, 154.15, 150.90, 155.58, 109.49, 179.07, 150.78, 81.41, 166.95, 163.17, 113.24, 105.34, 140.14, 180.57, 96.65, 0.00, 153.60, 198.44, 126.48, 117.77, 148.13, 152.03, 179.23, 199.02, 126.95, 81.85, 83.72, 198.40, 148.91, 195.54, 148.37},
            {102.57, 116.69, 120.72, 122.05, 135.06, 115.00, 120.51, 140.20, 87.95, 168.41, 101.97, 150.85, 109.36, 102.64, 144.73, 169.00, 153.60, 0.00, 147.88, 186.32, 150.84, 197.04, 90.13, 128.49, 144.44, 137.75, 183.88, 121.32, 87.81, 126.01, 93.96, 95.50},
            {198.12, 105.55, 197.75, 140.80, 88.85, 179.42, 143.37, 97.51, 96.92, 136.07, 139.26, 107.66, 83.23, 166.57, 105.79, 106.35, 198.44, 147.88, 0.00, 95.05, 161.51, 154.29, 186.27, 150.00, 98.73, 161.17, 91.51, 105.92, 187.78, 86.89, 132.54, 140.75},
            {87.80, 102.37, 191.99, 165.59, 130.34, 96.39, 110.12, 169.07, 93.83, 133.81, 99.53, 86.79, 140.84, 187.32, 143.84, 128.97, 126.48, 186.32, 95.05, 0.00, 111.33, 140.81, 193.31, 164.79, 166.66, 165.17, 138.87, 94.63, 159.07, 137.08, 112.84, 88.38},
            {112.81, 97.52, 99.98, 138.11, 195.78, 180.15, 180.98, 171.61, 140.33, 175.03, 86.43, 80.90, 88.75, 151.07, 149.60, 197.15, 117.77, 150.84, 161.51, 111.33, 0.00, 83.15, 116.27, 126.21, 142.10, 93.52, 129.69, 176.17, 195.67, 84.46, 179.50, 93.84},
            {129.50, 139.77, 166.86, 167.36, 100.00, 165.15, 86.54, 198.75, 96.72, 135.97, 113.95, 182.45, 130.76, 199.87, 136.44, 162.46, 148.13, 197.04, 154.29, 140.81, 83.15, 0.00, 168.96, 129.83, 80.21, 93.45, 144.90, 160.87, 93.67, 183.53, 156.10, 178.34},
            {179.10, 186.51, 164.59, 81.77, 135.44, 135.38, 153.48, 135.27, 101.04, 192.49, 113.02, 95.44, 110.52, 99.65, 121.46, 139.70, 152.03, 90.13, 186.27, 193.31, 116.27, 168.96, 0.00, 97.23, 121.47, 195.01, 89.24, 130.90, 168.48, 195.17, 164.94, 143.41},
            {197.51, 176.34, 168.85, 125.88, 161.19, 161.35, 145.21, 126.63, 162.29, 119.85, 157.22, 195.01, 163.63, 190.66, 181.45, 120.70, 179.23, 128.49, 150.00, 164.79, 126.21, 129.83, 97.23, 0.00, 130.55, 181.84, 138.59, 195.14, 133.59, 165.45, 174.06, 117.40},
            {115.06, 105.52, 152.19, 179.94, 104.54, 102.24, 162.24, 118.60, 186.29, 161.92, 172.06, 197.72, 157.39, 189.54, 151.15, 150.05, 199.02, 144.44, 98.73, 166.66, 142.10, 80.21, 121.47, 130.55, 0.00, 157.52, 169.54, 186.74, 113.19, 184.02, 167.45, 118.86},
            {101.97, 194.95, 189.64, 82.65, 167.28, 181.38, 115.70, 178.44, 154.81, 138.29, 139.02, 184.95, 81.77, 127.27, 86.66, 100.20, 126.95, 137.75, 161.17, 165.17, 93.52, 93.45, 195.01, 181.84, 157.52, 0.00, 93.49, 176.48, 167.79, 87.44, 196.29, 168.59},
            {175.68, 131.68, 158.64, 169.69, 183.34, 167.16, 132.26, 173.49, 168.31, 128.50, 143.43, 166.74, 124.97, 110.92, 141.82, 182.36, 81.85, 183.88, 91.51, 138.87, 129.69, 144.90, 89.24, 138.59, 169.54, 93.49, 0.00, 198.81, 112.59, 172.11, 88.99, 175.15},
            {186.58, 146.48, 187.14, 146.23, 100.80, 138.26, 149.68, 155.20, 87.37, 125.85, 116.52, 86.03, 91.52, 124.82, 173.94, 177.14, 83.72, 121.32, 105.92, 94.63, 176.17, 160.87, 130.90, 195.14, 186.74, 176.48, 198.81, 0.00, 197.11, 100.21, 194.80, 107.79},
            {176.37, 193.79, 180.99, 100.07, 109.53, 143.45, 92.61, 97.09, 196.96, 193.93, 96.45, 177.52, 179.77, 119.53, 112.95, 153.78, 198.40, 87.81, 187.78, 159.07, 195.67, 93.67, 168.48, 133.59, 113.19, 167.79, 112.59, 197.11, 0.00, 105.43, 143.99, 125.61},
            {144.99, 181.24, 98.19, 177.56, 118.54, 82.33, 154.79, 168.63, 88.13, 113.62, 181.13, 139.48, 128.09, 158.39, 114.30, 115.41, 148.91, 126.01, 86.89, 137.08, 84.46, 183.53, 195.17, 165.45, 184.02, 87.44, 172.11, 100.21, 105.43, 0.00, 159.13, 160.35},
            {199.16, 100.52, 91.73, 176.96, 153.09, 175.99, 186.22, 82.32, 169.07, 95.95, 142.12, 135.59, 137.13, 159.45, 96.81, 148.19, 195.54, 93.96, 132.54, 112.84, 179.50, 156.10, 164.94, 174.06, 167.45, 196.29, 88.99, 194.80, 143.99, 159.13, 0.00, 161.77},
            {119.61, 194.07, 155.97, 113.71, 111.36, 194.04, 156.22, 167.70, 130.65, 186.05, 121.15, 119.89, 155.59, 163.69, 91.57, 130.18, 148.37, 95.50, 140.75, 88.38, 93.84, 178.34, 143.41, 117.40, 118.86, 168.59, 175.15, 107.79, 125.61, 160.35, 161.77, 0.00},
    };
    public static final double φp = 0.3;  //本例中都取0.2是会得到性质7疯狂降阶的情况，然后通过性质4直接得到了最优解
    public static final double φc = 0.3;
    public static double P;
    public static double C;

    public static void main(String[] args) {
        preHandle();
    }

    public static void preHandle() {
        DecimalFormat decimalFormat = new DecimalFormat("#.00");
        P = Arrays.stream(pi).reduce(0.0, Double::sum) * φp;
        C = Arrays.stream(ci).reduce(0.0, Double::sum) * φc;
        P = Double.parseDouble(decimalFormat.format(P));
        C = Double.parseDouble(decimalFormat.format(C));
        System.out.println("P = " + P);
        System.out.println("C = " + C);
        for (int i = 0; i < pi.length; i++) {
            V.add(new Facility(i + 1, ci[i], pi[i], pi[i] / ci[i]));
        }
    }
}
