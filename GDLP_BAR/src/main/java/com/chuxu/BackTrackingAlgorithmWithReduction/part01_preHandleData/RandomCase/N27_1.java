package com.chuxu.BackTrackingAlgorithmWithReduction.part01_preHandleData.RandomCase;

import com.chuxu.entity.Facility;

import java.text.DecimalFormat;
import java.util.Arrays;
import java.util.LinkedHashSet;

public class N27_1 {
    public static int dimension = 27;
    public static final double[] ci =
            {477.0, 260.0, 905.0, 836.0, 454.0, 834.0, 641.0, 434.0, 538.0, 321.0, 798.0, 478.0, 758.0, 849.0, 915.0, 762.0, 535.0, 755.0, 452.0, 418.0, 952.0, 914.0, 514.0, 853.0, 283.0, 576.0, 176.0};
    public static final double[] pi =
            {595.0, 229.0, 702.0, 347.0, 950.0, 528.0, 459.0, 767.0, 392.0, 382.0, 516.0, 190.0, 879.0, 363.0, 918.0, 373.0, 478.0, 645.0, 969.0, 128.0, 327.0, 755.0, 496.0, 252.0, 384.0, 185.0, 589.0};
    public static final LinkedHashSet<Facility> V = new LinkedHashSet<>();
    public static double[][] disMatrix = {
            {0.00, 98.97, 111.47, 190.90, 187.14, 132.11, 89.31, 89.92, 96.71, 118.25, 146.97, 93.99, 80.66, 152.53, 194.70, 85.83, 171.21, 176.21, 131.88, 142.42, 158.15, 153.97, 129.12, 199.44, 143.29, 91.15, 166.13},
            {98.97, 0.00, 180.75, 167.88, 156.90, 107.75, 181.08, 150.66, 132.59, 176.91, 116.21, 177.08, 172.88, 142.80, 154.20, 166.94, 167.75, 126.36, 134.68, 118.07, 109.38, 192.28, 189.90, 157.89, 196.23, 127.85, 182.36},
            {111.47, 180.75, 0.00, 132.72, 149.65, 123.87, 128.02, 106.12, 94.38, 111.21, 82.40, 163.27, 164.63, 109.16, 189.08, 167.42, 141.30, 147.48, 125.59, 147.36, 103.37, 174.03, 191.17, 171.60, 88.02, 173.59, 84.54},
            {190.90, 167.88, 132.72, 0.00, 165.39, 98.98, 180.27, 136.08, 110.78, 81.71, 167.51, 150.36, 158.04, 136.46, 104.23, 158.86, 168.18, 186.53, 174.16, 121.18, 182.04, 119.52, 147.85, 145.13, 190.32, 192.87, 92.84},
            {187.14, 156.90, 149.65, 165.39, 0.00, 161.65, 162.06, 122.76, 127.39, 190.13, 95.62, 116.82, 126.35, 122.77, 166.73, 166.19, 135.66, 103.98, 102.32, 141.34, 182.46, 81.04, 106.76, 198.62, 182.88, 157.23, 168.81},
            {132.11, 107.75, 123.87, 98.98, 161.65, 0.00, 101.07, 148.15, 106.48, 183.15, 166.79, 151.82, 130.95, 109.20, 82.46, 107.06, 178.35, 83.40, 196.86, 112.73, 125.54, 197.16, 140.80, 80.62, 118.11, 113.75, 104.98},
            {89.31, 181.08, 128.02, 180.27, 162.06, 101.07, 0.00, 113.33, 132.57, 181.05, 166.04, 103.43, 158.70, 165.38, 123.78, 149.54, 83.81, 183.17, 119.01, 153.12, 159.33, 122.53, 81.27, 92.34, 81.62, 146.29, 169.86},
            {89.92, 150.66, 106.12, 136.08, 122.76, 148.15, 113.33, 0.00, 85.51, 185.10, 190.60, 179.14, 96.12, 185.03, 160.25, 180.27, 115.20, 160.54, 132.02, 186.94, 124.20, 115.64, 191.67, 161.32, 132.23, 176.45, 148.08},
            {96.71, 132.59, 94.38, 110.78, 127.39, 106.48, 132.57, 85.51, 0.00, 139.05, 136.81, 117.63, 169.79, 128.70, 135.31, 179.07, 174.49, 130.97, 117.10, 155.97, 91.33, 86.87, 131.96, 81.02, 148.77, 81.86, 100.59},
            {118.25, 176.91, 111.21, 81.71, 190.13, 183.15, 181.05, 185.10, 139.05, 0.00, 187.25, 197.37, 184.04, 166.15, 162.95, 117.39, 119.87, 163.55, 187.18, 105.22, 149.58, 83.80, 105.43, 160.61, 117.06, 115.84, 88.97},
            {146.97, 116.21, 82.40, 167.51, 95.62, 166.79, 166.04, 190.60, 136.81, 187.25, 0.00, 128.26, 155.61, 116.75, 180.05, 143.02, 170.60, 113.51, 177.02, 126.67, 114.54, 155.50, 119.06, 167.76, 137.06, 196.86, 109.88},
            {93.99, 177.08, 163.27, 150.36, 116.82, 151.82, 103.43, 179.14, 117.63, 197.37, 128.26, 0.00, 142.10, 94.22, 171.31, 92.80, 122.35, 196.32, 149.24, 176.84, 139.16, 122.37, 198.14, 93.98, 94.12, 132.03, 142.11},
            {80.66, 172.88, 164.63, 158.04, 126.35, 130.95, 158.70, 96.12, 169.79, 184.04, 155.61, 142.10, 0.00, 142.33, 166.80, 82.15, 114.72, 178.28, 103.19, 85.19, 141.91, 182.42, 122.39, 190.52, 97.53, 80.24, 151.02},
            {152.53, 142.80, 109.16, 136.46, 122.77, 109.20, 165.38, 185.03, 128.70, 166.15, 116.75, 94.22, 142.33, 0.00, 167.63, 164.11, 167.48, 131.70, 181.00, 124.80, 113.83, 172.42, 192.13, 129.91, 175.37, 187.49, 142.74},
            {194.70, 154.20, 189.08, 104.23, 166.73, 82.46, 123.78, 160.25, 135.31, 162.95, 180.05, 171.31, 166.80, 167.63, 0.00, 182.32, 136.80, 109.09, 85.79, 151.16, 109.36, 119.89, 117.51, 91.29, 108.14, 112.55, 143.55},
            {85.83, 166.94, 167.42, 158.86, 166.19, 107.06, 149.54, 180.27, 179.07, 117.39, 143.02, 92.80, 82.15, 164.11, 182.32, 0.00, 178.84, 164.87, 161.45, 146.34, 188.81, 157.76, 194.48, 188.38, 140.68, 199.46, 119.78},
            {171.21, 167.75, 141.30, 168.18, 135.66, 178.35, 83.81, 115.20, 174.49, 119.87, 170.60, 122.35, 114.72, 167.48, 136.80, 178.84, 0.00, 87.47, 161.50, 157.73, 112.48, 95.02, 163.29, 170.03, 120.86, 117.53, 82.52},
            {176.21, 126.36, 147.48, 186.53, 103.98, 83.40, 183.17, 160.54, 130.97, 163.55, 113.51, 196.32, 178.28, 131.70, 109.09, 164.87, 87.47, 0.00, 134.16, 189.14, 83.89, 144.34, 111.73, 155.89, 97.41, 172.76, 129.04},
            {131.88, 134.68, 125.59, 174.16, 102.32, 196.86, 119.01, 132.02, 117.10, 187.18, 177.02, 149.24, 103.19, 181.00, 85.79, 161.45, 161.50, 134.16, 0.00, 192.44, 181.93, 130.26, 82.56, 134.74, 94.71, 156.41, 191.23},
            {142.42, 118.07, 147.36, 121.18, 141.34, 112.73, 153.12, 186.94, 155.97, 105.22, 126.67, 176.84, 85.19, 124.80, 151.16, 146.34, 157.73, 189.14, 192.44, 0.00, 155.43, 197.08, 104.86, 168.03, 138.86, 184.44, 191.52},
            {158.15, 109.38, 103.37, 182.04, 182.46, 125.54, 159.33, 124.20, 91.33, 149.58, 114.54, 139.16, 141.91, 113.83, 109.36, 188.81, 112.48, 83.89, 181.93, 155.43, 0.00, 125.82, 83.17, 143.12, 104.39, 190.03, 116.72},
            {153.97, 192.28, 174.03, 119.52, 81.04, 197.16, 122.53, 115.64, 86.87, 83.80, 155.50, 122.37, 182.42, 172.42, 119.89, 157.76, 95.02, 144.34, 130.26, 197.08, 125.82, 0.00, 199.68, 105.94, 101.06, 84.91, 121.59},
            {129.12, 189.90, 191.17, 147.85, 106.76, 140.80, 81.27, 191.67, 131.96, 105.43, 119.06, 198.14, 122.39, 192.13, 117.51, 194.48, 163.29, 111.73, 82.56, 104.86, 83.17, 199.68, 0.00, 164.55, 114.13, 94.67, 133.93},
            {199.44, 157.89, 171.60, 145.13, 198.62, 80.62, 92.34, 161.32, 81.02, 160.61, 167.76, 93.98, 190.52, 129.91, 91.29, 188.38, 170.03, 155.89, 134.74, 168.03, 143.12, 105.94, 164.55, 0.00, 179.20, 122.12, 99.37},
            {143.29, 196.23, 88.02, 190.32, 182.88, 118.11, 81.62, 132.23, 148.77, 117.06, 137.06, 94.12, 97.53, 175.37, 108.14, 140.68, 120.86, 97.41, 94.71, 138.86, 104.39, 101.06, 114.13, 179.20, 0.00, 137.49, 114.80},
            {91.15, 127.85, 173.59, 192.87, 157.23, 113.75, 146.29, 176.45, 81.86, 115.84, 196.86, 132.03, 80.24, 187.49, 112.55, 199.46, 117.53, 172.76, 156.41, 184.44, 190.03, 84.91, 94.67, 122.12, 137.49, 0.00, 139.56},
            {166.13, 182.36, 84.54, 92.84, 168.81, 104.98, 169.86, 148.08, 100.59, 88.97, 109.88, 142.11, 151.02, 142.74, 143.55, 119.78, 82.52, 129.04, 191.23, 191.52, 116.72, 121.59, 133.93, 99.37, 114.80, 139.56, 0.00},
    };
    public static final double φp = 0.3;  //本例中都取0.2是会得到性质7疯狂降阶的情况，然后通过性质4直接得到了最优解
    public static final double φc = 0.3;
    public static double P;
    public static double C;

    public static void main(String[] args) {
        preHandle();
    }

    public static void preHandle() {
        DecimalFormat decimalFormat = new DecimalFormat("#.00");
        P = Arrays.stream(pi).reduce(0.0, Double::sum) * φp;
        C = Arrays.stream(ci).reduce(0.0, Double::sum) * φc;
        P = Double.parseDouble(decimalFormat.format(P));
        C = Double.parseDouble(decimalFormat.format(C));
        System.out.println("P = " + P);
        System.out.println("C = " + C);
        for (int i = 0; i < pi.length; i++) {
            V.add(new Facility(i + 1, ci[i], pi[i], pi[i] / ci[i]));
        }
    }
}
