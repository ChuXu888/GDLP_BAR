package com.chuxu.BackTrackingAlgorithmWithReduction.part01_preHandleData.RandomCase;

import com.chuxu.entity.Facility;

import java.text.DecimalFormat;
import java.util.Arrays;
import java.util.LinkedHashSet;

public class N32_5 {
    public static int dimension = 32;
    public static final double[] ci =
            {879.0, 687.0, 1026.0, 352.0, 483.0, 792.0, 652.0, 731.0, 819.0, 426.0, 1001.0, 1041.0, 789.0, 374.0, 486.0, 825.0, 892.0, 300.0, 1050.0, 488.0, 538.0, 665.0, 380.0, 751.0, 717.0, 899.0, 904.0, 826.0, 1003.0, 729.0, 1193.0, 773.0};
    public static final double[] pi =
            {306.0, 996.0, 204.0, 664.0, 894.0, 1015.0, 238.0, 676.0, 441.0, 408.0, 863.0, 665.0, 1068.0, 522.0, 234.0, 462.0, 1084.0, 702.0, 358.0, 698.0, 536.0, 884.0, 905.0, 872.0, 424.0, 815.0, 486.0, 1019.0, 1096.0, 301.0, 816.0, 322.0};
    public static final LinkedHashSet<Facility> V = new LinkedHashSet<>();
    public static double[][] disMatrix = {
            {0.00, 113.05, 165.30, 134.17, 106.51, 81.77, 158.84, 126.01, 106.14, 110.40, 190.87, 173.74, 143.78, 133.90, 115.53, 110.78, 161.78, 170.88, 104.09, 195.97, 181.95, 199.91, 95.35, 138.35, 126.91, 176.70, 121.42, 113.80, 126.71, 196.30, 119.72, 87.55},
            {113.05, 0.00, 178.24, 122.45, 171.88, 125.77, 162.00, 176.94, 123.50, 102.94, 180.93, 127.77, 116.55, 168.39, 90.51, 192.86, 146.59, 86.52, 136.94, 109.63, 182.45, 149.37, 172.07, 166.19, 173.98, 178.64, 129.22, 190.89, 186.30, 186.14, 123.00, 150.03},
            {165.30, 178.24, 0.00, 134.59, 147.55, 159.49, 191.88, 113.61, 103.65, 169.38, 175.91, 119.47, 196.61, 187.68, 181.72, 88.60, 115.81, 157.12, 120.65, 189.82, 88.46, 110.94, 136.06, 80.37, 84.74, 191.91, 174.20, 135.18, 115.45, 170.23, 138.06, 80.86},
            {134.17, 122.45, 134.59, 0.00, 182.11, 191.95, 120.34, 172.45, 155.35, 142.47, 189.17, 199.95, 166.62, 86.49, 111.85, 126.07, 161.80, 146.12, 166.62, 153.31, 162.10, 143.00, 131.87, 179.84, 188.47, 158.31, 134.13, 168.38, 90.17, 96.19, 163.25, 80.89},
            {106.51, 171.88, 147.55, 182.11, 0.00, 116.40, 171.41, 162.75, 83.97, 101.94, 101.59, 117.50, 186.31, 123.50, 186.89, 168.43, 168.93, 182.74, 86.86, 165.18, 92.77, 85.62, 114.76, 183.08, 135.42, 134.24, 103.60, 99.29, 99.75, 88.32, 156.15, 185.84},
            {81.77, 125.77, 159.49, 191.95, 116.40, 0.00, 172.17, 88.15, 112.91, 113.60, 106.71, 178.51, 117.38, 91.25, 173.27, 175.73, 187.31, 127.37, 174.84, 155.30, 93.17, 161.08, 87.85, 167.20, 102.33, 98.43, 173.65, 109.20, 187.22, 96.49, 146.32, 165.54},
            {158.84, 162.00, 191.88, 120.34, 171.41, 172.17, 0.00, 80.53, 196.17, 163.07, 168.92, 87.93, 137.34, 108.37, 108.57, 160.92, 96.24, 191.35, 104.91, 187.36, 85.20, 188.47, 183.84, 136.94, 168.65, 139.41, 189.03, 81.33, 116.96, 104.09, 90.29, 115.69},
            {126.01, 176.94, 113.61, 172.45, 162.75, 88.15, 80.53, 0.00, 161.00, 151.93, 179.33, 158.63, 85.58, 162.33, 151.05, 101.64, 128.50, 185.77, 169.44, 137.40, 154.91, 170.26, 111.60, 157.58, 112.69, 116.15, 111.50, 196.47, 125.08, 144.56, 127.39, 85.91},
            {106.14, 123.50, 103.65, 155.35, 83.97, 112.91, 196.17, 161.00, 0.00, 140.25, 191.08, 132.08, 179.81, 115.35, 105.78, 195.30, 123.26, 103.98, 94.43, 190.17, 181.96, 140.99, 112.92, 193.02, 91.21, 197.40, 188.22, 176.54, 92.45, 111.09, 163.54, 80.62},
            {110.40, 102.94, 169.38, 142.47, 101.94, 113.60, 163.07, 151.93, 140.25, 0.00, 116.33, 84.82, 134.54, 143.61, 147.12, 123.82, 95.06, 88.59, 182.36, 178.54, 87.55, 145.15, 124.40, 126.04, 132.61, 146.47, 127.53, 144.98, 196.07, 154.91, 134.40, 193.81},
            {190.87, 180.93, 175.91, 189.17, 101.59, 106.71, 168.92, 179.33, 191.08, 116.33, 0.00, 118.98, 116.29, 169.99, 111.34, 187.22, 83.51, 98.97, 80.68, 172.05, 145.20, 154.35, 114.63, 111.55, 182.72, 90.40, 190.31, 145.26, 121.28, 182.20, 84.67, 120.19},
            {173.74, 127.77, 119.47, 199.95, 117.50, 178.51, 87.93, 158.63, 132.08, 84.82, 118.98, 0.00, 116.44, 127.07, 160.38, 96.51, 126.89, 159.75, 162.86, 174.38, 167.48, 93.76, 154.15, 161.01, 93.74, 145.38, 108.49, 137.97, 159.49, 124.72, 146.82, 173.51},
            {143.78, 116.55, 196.61, 166.62, 186.31, 117.38, 137.34, 85.58, 179.81, 134.54, 116.29, 116.44, 0.00, 133.97, 170.15, 174.10, 133.33, 103.12, 137.39, 83.00, 135.47, 171.26, 154.31, 101.89, 111.05, 125.81, 114.84, 92.31, 132.45, 166.47, 92.60, 122.63},
            {133.90, 168.39, 187.68, 86.49, 123.50, 91.25, 108.37, 162.33, 115.35, 143.61, 169.99, 127.07, 133.97, 0.00, 133.97, 154.20, 124.79, 99.67, 137.42, 101.75, 111.49, 189.00, 146.08, 88.60, 173.21, 117.06, 165.31, 117.59, 151.21, 184.95, 186.59, 158.58},
            {115.53, 90.51, 181.72, 111.85, 186.89, 173.27, 108.57, 151.05, 105.78, 147.12, 111.34, 160.38, 170.15, 133.97, 0.00, 140.61, 133.41, 194.25, 146.80, 135.61, 162.86, 119.79, 98.96, 198.68, 109.47, 139.13, 99.84, 82.76, 170.18, 141.04, 135.47, 95.55},
            {110.78, 192.86, 88.60, 126.07, 168.43, 175.73, 160.92, 101.64, 195.30, 123.82, 187.22, 96.51, 174.10, 154.20, 140.61, 0.00, 134.15, 192.75, 125.56, 119.32, 97.33, 109.54, 199.18, 167.56, 109.36, 80.16, 141.64, 151.57, 128.45, 108.13, 179.04, 125.31},
            {161.78, 146.59, 115.81, 161.80, 168.93, 187.31, 96.24, 128.50, 123.26, 95.06, 83.51, 126.89, 133.33, 124.79, 133.41, 134.15, 0.00, 159.73, 121.65, 139.00, 176.17, 126.91, 100.72, 91.62, 92.30, 114.19, 189.76, 154.30, 83.54, 157.14, 187.86, 157.44},
            {170.88, 86.52, 157.12, 146.12, 182.74, 127.37, 191.35, 185.77, 103.98, 88.59, 98.97, 159.75, 103.12, 99.67, 194.25, 192.75, 159.73, 0.00, 123.84, 156.06, 115.89, 154.75, 116.82, 174.54, 110.74, 82.91, 104.33, 88.21, 91.95, 109.60, 179.46, 185.25},
            {104.09, 136.94, 120.65, 166.62, 86.86, 174.84, 104.91, 169.44, 94.43, 182.36, 80.68, 162.86, 137.39, 137.42, 146.80, 125.56, 121.65, 123.84, 0.00, 164.31, 117.30, 150.86, 90.32, 122.49, 192.29, 174.37, 167.39, 189.80, 123.74, 121.11, 114.61, 132.79},
            {195.97, 109.63, 189.82, 153.31, 165.18, 155.30, 187.36, 137.40, 190.17, 178.54, 172.05, 174.38, 83.00, 101.75, 135.61, 119.32, 139.00, 156.06, 164.31, 0.00, 127.72, 107.50, 155.62, 187.26, 133.72, 93.48, 137.06, 88.35, 88.68, 159.04, 80.60, 118.42},
            {181.95, 182.45, 88.46, 162.10, 92.77, 93.17, 85.20, 154.91, 181.96, 87.55, 145.20, 167.48, 135.47, 111.49, 162.86, 97.33, 176.17, 115.89, 117.30, 127.72, 0.00, 124.04, 117.45, 150.64, 111.38, 175.74, 114.94, 185.17, 100.55, 145.69, 82.15, 137.32},
            {199.91, 149.37, 110.94, 143.00, 85.62, 161.08, 188.47, 170.26, 140.99, 145.15, 154.35, 93.76, 171.26, 189.00, 119.79, 109.54, 126.91, 154.75, 150.86, 107.50, 124.04, 0.00, 129.54, 104.79, 101.96, 108.97, 181.58, 163.65, 101.02, 165.67, 182.63, 156.51},
            {95.35, 172.07, 136.06, 131.87, 114.76, 87.85, 183.84, 111.60, 112.92, 124.40, 114.63, 154.15, 154.31, 146.08, 98.96, 199.18, 100.72, 116.82, 90.32, 155.62, 117.45, 129.54, 0.00, 159.08, 163.09, 117.13, 197.02, 160.74, 190.64, 142.50, 151.88, 168.24},
            {138.35, 166.19, 80.37, 179.84, 183.08, 167.20, 136.94, 157.58, 193.02, 126.04, 111.55, 161.01, 101.89, 88.60, 198.68, 167.56, 91.62, 174.54, 122.49, 187.26, 150.64, 104.79, 159.08, 0.00, 186.68, 199.71, 178.52, 92.06, 122.28, 151.77, 88.07, 137.46},
            {126.91, 173.98, 84.74, 188.47, 135.42, 102.33, 168.65, 112.69, 91.21, 132.61, 182.72, 93.74, 111.05, 173.21, 109.47, 109.36, 92.30, 110.74, 192.29, 133.72, 111.38, 101.96, 163.09, 186.68, 0.00, 167.01, 140.84, 182.73, 110.91, 160.17, 116.81, 98.79},
            {176.70, 178.64, 191.91, 158.31, 134.24, 98.43, 139.41, 116.15, 197.40, 146.47, 90.40, 145.38, 125.81, 117.06, 139.13, 80.16, 114.19, 82.91, 174.37, 93.48, 175.74, 108.97, 117.13, 199.71, 167.01, 0.00, 139.23, 114.91, 116.25, 142.25, 167.35, 100.22},
            {121.42, 129.22, 174.20, 134.13, 103.60, 173.65, 189.03, 111.50, 188.22, 127.53, 190.31, 108.49, 114.84, 165.31, 99.84, 141.64, 189.76, 104.33, 167.39, 137.06, 114.94, 181.58, 197.02, 178.52, 140.84, 139.23, 0.00, 100.45, 193.50, 197.19, 197.13, 194.91},
            {113.80, 190.89, 135.18, 168.38, 99.29, 109.20, 81.33, 196.47, 176.54, 144.98, 145.26, 137.97, 92.31, 117.59, 82.76, 151.57, 154.30, 88.21, 189.80, 88.35, 185.17, 163.65, 160.74, 92.06, 182.73, 114.91, 100.45, 0.00, 120.87, 90.67, 190.60, 129.80},
            {126.71, 186.30, 115.45, 90.17, 99.75, 187.22, 116.96, 125.08, 92.45, 196.07, 121.28, 159.49, 132.45, 151.21, 170.18, 128.45, 83.54, 91.95, 123.74, 88.68, 100.55, 101.02, 190.64, 122.28, 110.91, 116.25, 193.50, 120.87, 0.00, 139.50, 84.01, 117.47},
            {196.30, 186.14, 170.23, 96.19, 88.32, 96.49, 104.09, 144.56, 111.09, 154.91, 182.20, 124.72, 166.47, 184.95, 141.04, 108.13, 157.14, 109.60, 121.11, 159.04, 145.69, 165.67, 142.50, 151.77, 160.17, 142.25, 197.19, 90.67, 139.50, 0.00, 162.09, 83.22},
            {119.72, 123.00, 138.06, 163.25, 156.15, 146.32, 90.29, 127.39, 163.54, 134.40, 84.67, 146.82, 92.60, 186.59, 135.47, 179.04, 187.86, 179.46, 114.61, 80.60, 82.15, 182.63, 151.88, 88.07, 116.81, 167.35, 197.13, 190.60, 84.01, 162.09, 0.00, 148.37},
            {87.55, 150.03, 80.86, 80.89, 185.84, 165.54, 115.69, 85.91, 80.62, 193.81, 120.19, 173.51, 122.63, 158.58, 95.55, 125.31, 157.44, 185.25, 132.79, 118.42, 137.32, 156.51, 168.24, 137.46, 98.79, 100.22, 194.91, 129.80, 117.47, 83.22, 148.37, 0.00},
    };
    public static final double φp = 0.3;  //本例中都取0.2是会得到性质7疯狂降阶的情况，然后通过性质4直接得到了最优解
    public static final double φc = 0.3;
    public static double P;
    public static double C;

    public static void main(String[] args) {
        preHandle();
    }

    public static void preHandle() {
        DecimalFormat decimalFormat = new DecimalFormat("#.00");
        P = Arrays.stream(pi).reduce(0.0, Double::sum) * φp;
        C = Arrays.stream(ci).reduce(0.0, Double::sum) * φc;
        P = Double.parseDouble(decimalFormat.format(P));
        C = Double.parseDouble(decimalFormat.format(C));
        System.out.println("P = " + P);
        System.out.println("C = " + C);
        for (int i = 0; i < pi.length; i++) {
            V.add(new Facility(i + 1, ci[i], pi[i], pi[i] / ci[i]));
        }
    }
}
