package com.chuxu.BackTrackingAlgorithmWithReduction.part01_preHandleData.RandomCase;

import com.chuxu.entity.Facility;

import java.text.DecimalFormat;
import java.util.Arrays;
import java.util.LinkedHashSet;

public class N27_2 {
    public static int dimension = 27;
    public static final double[] ci =
            {687.0, 971.0, 225.0, 541.0, 848.0, 248.0, 911.0, 661.0, 454.0, 930.0, 999.0, 914.0, 961.0, 108.0, 901.0, 397.0, 410.0, 166.0, 500.0, 855.0, 214.0, 183.0, 618.0, 764.0, 761.0, 394.0, 132.0};
    public static final double[] pi =
            {305.0, 347.0, 135.0, 144.0, 274.0, 405.0, 934.0, 932.0, 665.0, 405.0, 639.0, 237.0, 585.0, 707.0, 372.0, 181.0, 676.0, 924.0, 156.0, 469.0, 352.0, 680.0, 453.0, 555.0, 267.0, 717.0, 537.0};
    public static final LinkedHashSet<Facility> V = new LinkedHashSet<>();
    public static double[][] disMatrix = {
            {0.00, 140.72, 112.17, 110.51, 179.71, 140.45, 167.62, 93.68, 134.68, 112.67, 187.97, 86.26, 112.12, 100.00, 101.46, 115.92, 91.13, 112.76, 101.56, 170.74, 104.17, 188.32, 81.39, 133.51, 107.67, 114.73, 100.06},
            {140.72, 0.00, 141.00, 137.12, 98.35, 147.37, 87.16, 167.49, 146.76, 112.67, 82.78, 135.50, 144.47, 86.57, 152.15, 180.42, 118.09, 170.83, 128.07, 163.52, 140.97, 122.22, 122.31, 133.48, 154.33, 130.32, 136.99},
            {112.17, 141.00, 0.00, 136.27, 122.67, 147.12, 105.27, 142.81, 155.56, 128.10, 145.81, 126.13, 196.55, 149.63, 126.05, 182.28, 81.38, 117.04, 152.63, 95.01, 83.91, 190.32, 105.42, 134.37, 97.38, 91.38, 122.67},
            {110.51, 137.12, 136.27, 0.00, 192.67, 142.03, 116.99, 149.95, 118.65, 106.93, 125.88, 164.71, 151.81, 164.76, 196.24, 160.32, 123.51, 142.75, 101.76, 140.51, 180.24, 91.11, 149.49, 194.71, 156.44, 122.41, 102.28},
            {179.71, 98.35, 122.67, 192.67, 0.00, 158.85, 140.66, 181.14, 111.32, 173.98, 118.40, 141.88, 90.93, 195.98, 198.54, 168.31, 98.34, 185.30, 197.81, 111.51, 155.31, 114.10, 148.49, 167.60, 126.25, 150.96, 89.51},
            {140.45, 147.37, 147.12, 142.03, 158.85, 0.00, 88.51, 109.49, 179.75, 179.72, 148.47, 143.30, 179.18, 174.22, 170.33, 158.03, 173.65, 110.91, 92.07, 178.05, 183.46, 144.00, 162.89, 154.43, 133.82, 155.05, 101.74},
            {167.62, 87.16, 105.27, 116.99, 140.66, 88.51, 0.00, 169.29, 147.39, 189.10, 108.18, 177.12, 163.66, 184.74, 126.09, 176.34, 161.44, 171.73, 145.22, 135.89, 126.73, 138.26, 183.98, 137.33, 108.65, 162.23, 128.72},
            {93.68, 167.49, 142.81, 149.95, 181.14, 109.49, 169.29, 0.00, 111.72, 199.91, 157.18, 90.42, 173.87, 105.72, 103.02, 179.59, 163.06, 166.73, 155.58, 112.75, 189.66, 196.43, 115.90, 131.61, 161.44, 162.49, 111.74},
            {134.68, 146.76, 155.56, 118.65, 111.32, 179.75, 147.39, 111.72, 0.00, 176.26, 181.27, 103.98, 118.12, 188.35, 129.38, 92.98, 122.51, 188.58, 189.05, 118.98, 82.69, 94.68, 143.67, 138.48, 130.90, 121.82, 165.94},
            {112.67, 112.67, 128.10, 106.93, 173.98, 179.72, 189.10, 199.91, 176.26, 0.00, 149.85, 148.40, 156.99, 96.87, 104.70, 107.39, 81.94, 192.42, 112.33, 175.06, 156.46, 120.06, 92.55, 175.43, 144.42, 175.29, 184.83},
            {187.97, 82.78, 145.81, 125.88, 118.40, 148.47, 108.18, 157.18, 181.27, 149.85, 0.00, 169.31, 149.44, 99.78, 188.22, 81.53, 125.46, 118.54, 86.28, 156.63, 99.29, 112.21, 145.53, 80.49, 88.03, 164.04, 163.29},
            {86.26, 135.50, 126.13, 164.71, 141.88, 143.30, 177.12, 90.42, 103.98, 148.40, 169.31, 0.00, 144.93, 113.87, 147.38, 182.08, 176.19, 131.78, 110.10, 143.29, 135.15, 92.82, 166.61, 81.01, 88.44, 86.31, 185.92},
            {112.12, 144.47, 196.55, 151.81, 90.93, 179.18, 163.66, 173.87, 118.12, 156.99, 149.44, 144.93, 0.00, 80.35, 164.41, 138.97, 125.97, 180.09, 186.27, 116.77, 89.86, 130.44, 157.20, 118.00, 108.79, 179.82, 178.32},
            {100.00, 86.57, 149.63, 164.76, 195.98, 174.22, 184.74, 105.72, 188.35, 96.87, 99.78, 113.87, 80.35, 0.00, 161.10, 169.44, 142.82, 109.97, 140.66, 140.20, 132.31, 180.60, 108.26, 131.13, 84.29, 84.67, 171.61},
            {101.46, 152.15, 126.05, 196.24, 198.54, 170.33, 126.09, 103.02, 129.38, 104.70, 188.22, 147.38, 164.41, 161.10, 0.00, 126.66, 82.56, 172.14, 136.36, 177.91, 183.03, 116.73, 119.32, 153.46, 144.03, 119.11, 180.25},
            {115.92, 180.42, 182.28, 160.32, 168.31, 158.03, 176.34, 179.59, 92.98, 107.39, 81.53, 182.08, 138.97, 169.44, 126.66, 0.00, 142.41, 188.72, 172.86, 111.10, 83.11, 180.02, 197.75, 167.59, 133.78, 175.67, 84.21},
            {91.13, 118.09, 81.38, 123.51, 98.34, 173.65, 161.44, 163.06, 122.51, 81.94, 125.46, 176.19, 125.97, 142.82, 82.56, 142.41, 0.00, 87.43, 187.65, 92.73, 96.61, 172.57, 126.22, 185.73, 130.36, 160.06, 137.82},
            {112.76, 170.83, 117.04, 142.75, 185.30, 110.91, 171.73, 166.73, 188.58, 192.42, 118.54, 131.78, 180.09, 109.97, 172.14, 188.72, 87.43, 0.00, 191.66, 128.61, 146.77, 147.03, 117.58, 99.53, 87.73, 182.04, 183.01},
            {101.56, 128.07, 152.63, 101.76, 197.81, 92.07, 145.22, 155.58, 189.05, 112.33, 86.28, 110.10, 186.27, 140.66, 136.36, 172.86, 187.65, 191.66, 0.00, 193.33, 115.99, 112.27, 99.26, 80.63, 94.08, 98.24, 151.98},
            {170.74, 163.52, 95.01, 140.51, 111.51, 178.05, 135.89, 112.75, 118.98, 175.06, 156.63, 143.29, 116.77, 140.20, 177.91, 111.10, 92.73, 128.61, 193.33, 0.00, 100.09, 82.68, 187.95, 170.53, 152.41, 121.79, 171.40},
            {104.17, 140.97, 83.91, 180.24, 155.31, 183.46, 126.73, 189.66, 82.69, 156.46, 99.29, 135.15, 89.86, 132.31, 183.03, 83.11, 96.61, 146.77, 115.99, 100.09, 0.00, 99.43, 112.14, 102.83, 184.71, 171.91, 125.35},
            {188.32, 122.22, 190.32, 91.11, 114.10, 144.00, 138.26, 196.43, 94.68, 120.06, 112.21, 92.82, 130.44, 180.60, 116.73, 180.02, 172.57, 147.03, 112.27, 82.68, 99.43, 0.00, 167.09, 199.87, 144.90, 122.63, 196.77},
            {81.39, 122.31, 105.42, 149.49, 148.49, 162.89, 183.98, 115.90, 143.67, 92.55, 145.53, 166.61, 157.20, 108.26, 119.32, 197.75, 126.22, 117.58, 99.26, 187.95, 112.14, 167.09, 0.00, 123.99, 166.96, 161.76, 169.15},
            {133.51, 133.48, 134.37, 194.71, 167.60, 154.43, 137.33, 131.61, 138.48, 175.43, 80.49, 81.01, 118.00, 131.13, 153.46, 167.59, 185.73, 99.53, 80.63, 170.53, 102.83, 199.87, 123.99, 0.00, 123.38, 177.41, 102.58},
            {107.67, 154.33, 97.38, 156.44, 126.25, 133.82, 108.65, 161.44, 130.90, 144.42, 88.03, 88.44, 108.79, 84.29, 144.03, 133.78, 130.36, 87.73, 94.08, 152.41, 184.71, 144.90, 166.96, 123.38, 0.00, 143.03, 183.64},
            {114.73, 130.32, 91.38, 122.41, 150.96, 155.05, 162.23, 162.49, 121.82, 175.29, 164.04, 86.31, 179.82, 84.67, 119.11, 175.67, 160.06, 182.04, 98.24, 121.79, 171.91, 122.63, 161.76, 177.41, 143.03, 0.00, 194.68},
            {100.06, 136.99, 122.67, 102.28, 89.51, 101.74, 128.72, 111.74, 165.94, 184.83, 163.29, 185.92, 178.32, 171.61, 180.25, 84.21, 137.82, 183.01, 151.98, 171.40, 125.35, 196.77, 169.15, 102.58, 183.64, 194.68, 0.00},
    };
    public static final double φp = 0.3;  //本例中都取0.2是会得到性质7疯狂降阶的情况，然后通过性质4直接得到了最优解
    public static final double φc = 0.3;
    public static double P;
    public static double C;

    public static void main(String[] args) {
        preHandle();
    }

    public static void preHandle() {
        DecimalFormat decimalFormat = new DecimalFormat("#.00");
        P = Arrays.stream(pi).reduce(0.0, Double::sum) * φp;
        C = Arrays.stream(ci).reduce(0.0, Double::sum) * φc;
        P = Double.parseDouble(decimalFormat.format(P));
        C = Double.parseDouble(decimalFormat.format(C));
        System.out.println("P = " + P);
        System.out.println("C = " + C);
        for (int i = 0; i < pi.length; i++) {
            V.add(new Facility(i + 1, ci[i], pi[i], pi[i] / ci[i]));
        }
    }
}
