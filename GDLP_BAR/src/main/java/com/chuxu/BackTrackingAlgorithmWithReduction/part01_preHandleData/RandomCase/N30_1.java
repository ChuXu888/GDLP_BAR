package com.chuxu.BackTrackingAlgorithmWithReduction.part01_preHandleData.RandomCase;

import com.chuxu.entity.Facility;

import java.text.DecimalFormat;
import java.util.Arrays;
import java.util.LinkedHashSet;

public class N30_1 {
    public static int dimension = 30;
    public static final double[] ci =
            {210.0, 544.0, 410.0, 589.0, 992.0, 544.0, 764.0, 362.0, 518.0, 757.0, 865.0, 495.0, 428.0, 957.0, 685.0, 960.0, 916.0, 342.0, 386.0, 463.0, 1077.0, 458.0, 417.0, 988.0, 308.0, 885.0, 1149.0, 295.0, 778.0, 923.0};
    public static final double[] pi =
            {293.0, 904.0, 1009.0, 519.0, 206.0, 1021.0, 990.0, 274.0, 501.0, 817.0, 1152.0, 229.0, 541.0, 919.0, 794.0, 627.0, 1129.0, 1121.0, 1121.0, 455.0, 512.0, 475.0, 932.0, 973.0, 1145.0, 947.0, 292.0, 303.0, 1191.0, 835.0};
    public static final LinkedHashSet<Facility> V = new LinkedHashSet<>();
    public static double[][] disMatrix = {
            {0.00, 199.41, 102.17, 166.35, 112.18, 198.02, 100.59, 166.68, 124.56, 87.76, 140.78, 173.12, 175.36, 171.50, 121.05, 116.75, 104.43, 126.10, 172.55, 95.18, 107.95, 123.46, 132.34, 163.28, 131.91, 150.39, 115.21, 109.00, 189.67, 115.16},
            {199.41, 0.00, 144.16, 148.02, 146.58, 178.61, 81.94, 172.72, 124.09, 91.46, 191.80, 86.94, 188.54, 197.40, 185.60, 167.25, 126.52, 172.42, 191.05, 194.86, 149.14, 196.53, 166.86, 139.23, 111.90, 92.35, 115.99, 125.19, 164.30, 178.01},
            {102.17, 144.16, 0.00, 151.76, 199.83, 95.67, 168.09, 140.17, 113.87, 98.56, 136.38, 154.17, 143.75, 150.50, 88.14, 171.64, 147.02, 197.85, 157.16, 168.54, 82.61, 92.00, 124.42, 162.37, 141.11, 98.81, 89.90, 88.47, 176.94, 176.20},
            {166.35, 148.02, 151.76, 0.00, 158.45, 82.35, 195.28, 132.73, 82.78, 156.60, 100.97, 161.91, 103.45, 159.02, 124.74, 132.04, 175.33, 161.17, 104.48, 120.92, 174.41, 92.46, 154.55, 97.43, 176.06, 184.86, 165.92, 168.89, 87.44, 186.68},
            {112.18, 146.58, 199.83, 158.45, 0.00, 123.12, 153.32, 121.68, 101.29, 120.94, 160.03, 140.54, 167.69, 94.44, 129.93, 84.69, 84.66, 80.70, 178.46, 197.18, 128.62, 148.41, 99.71, 165.94, 108.00, 124.03, 169.25, 184.59, 152.47, 148.44},
            {198.02, 178.61, 95.67, 82.35, 123.12, 0.00, 106.25, 99.06, 155.60, 197.79, 82.15, 108.37, 112.97, 195.54, 113.49, 83.26, 144.85, 109.45, 130.83, 135.29, 103.94, 108.14, 153.35, 171.44, 143.23, 126.44, 80.83, 125.83, 177.67, 136.79},
            {100.59, 81.94, 168.09, 195.28, 153.32, 106.25, 0.00, 199.63, 130.14, 175.73, 86.08, 108.95, 188.23, 142.78, 113.04, 166.20, 158.14, 148.27, 110.67, 167.22, 135.86, 82.05, 141.70, 97.46, 120.51, 82.54, 171.72, 94.34, 199.50, 120.63},
            {166.68, 172.72, 140.17, 132.73, 121.68, 99.06, 199.63, 0.00, 95.67, 169.03, 144.58, 167.73, 97.68, 107.58, 96.37, 165.20, 122.56, 146.60, 174.87, 164.63, 89.27, 138.11, 187.47, 124.36, 82.35, 140.93, 193.40, 127.61, 156.79, 102.69},
            {124.56, 124.09, 113.87, 82.78, 101.29, 155.60, 130.14, 95.67, 0.00, 85.15, 191.02, 185.29, 87.04, 82.33, 119.86, 163.41, 114.78, 182.44, 196.93, 89.28, 85.47, 175.50, 107.41, 148.86, 147.96, 85.99, 80.03, 105.86, 173.54, 95.64},
            {87.76, 91.46, 98.56, 156.60, 120.94, 197.79, 175.73, 169.03, 85.15, 0.00, 167.47, 157.66, 134.59, 84.29, 175.06, 154.18, 164.74, 104.04, 96.33, 146.08, 192.86, 172.85, 187.82, 172.07, 104.10, 99.21, 172.64, 92.05, 104.95, 188.13},
            {140.78, 191.80, 136.38, 100.97, 160.03, 82.15, 86.08, 144.58, 191.02, 167.47, 0.00, 183.60, 83.38, 117.48, 191.48, 181.15, 102.36, 199.49, 191.93, 110.29, 90.96, 142.84, 90.07, 192.73, 101.13, 181.16, 157.85, 166.57, 174.35, 181.45},
            {173.12, 86.94, 154.17, 161.91, 140.54, 108.37, 108.95, 167.73, 185.29, 157.66, 183.60, 0.00, 89.47, 145.88, 154.08, 160.40, 81.76, 155.63, 101.52, 176.91, 111.79, 105.31, 112.50, 126.33, 107.69, 195.01, 93.74, 100.07, 131.80, 103.12},
            {175.36, 188.54, 143.75, 103.45, 167.69, 112.97, 188.23, 97.68, 87.04, 134.59, 83.38, 89.47, 0.00, 171.39, 135.63, 171.23, 142.91, 152.97, 127.75, 181.43, 177.85, 125.83, 160.55, 131.78, 171.45, 170.84, 113.23, 80.32, 177.13, 179.90},
            {171.50, 197.40, 150.50, 159.02, 94.44, 195.54, 142.78, 107.58, 82.33, 84.29, 117.48, 145.88, 171.39, 0.00, 128.94, 195.64, 147.47, 88.51, 96.52, 149.38, 119.14, 192.31, 119.22, 141.60, 191.15, 126.60, 152.32, 113.76, 138.60, 152.93},
            {121.05, 185.60, 88.14, 124.74, 129.93, 113.49, 113.04, 96.37, 119.86, 175.06, 191.48, 154.08, 135.63, 128.94, 0.00, 103.33, 90.61, 133.06, 174.48, 183.73, 152.24, 152.47, 154.59, 100.64, 191.48, 180.07, 98.00, 179.51, 159.56, 131.17},
            {116.75, 167.25, 171.64, 132.04, 84.69, 83.26, 166.20, 165.20, 163.41, 154.18, 181.15, 160.40, 171.23, 195.64, 103.33, 0.00, 194.14, 195.69, 104.08, 90.59, 115.03, 163.13, 158.58, 90.46, 167.19, 142.83, 152.01, 189.55, 177.94, 171.23},
            {104.43, 126.52, 147.02, 175.33, 84.66, 144.85, 158.14, 122.56, 114.78, 164.74, 102.36, 81.76, 142.91, 147.47, 90.61, 194.14, 0.00, 148.72, 149.67, 90.68, 110.72, 166.20, 143.71, 92.26, 149.80, 107.78, 191.68, 137.38, 189.53, 111.44},
            {126.10, 172.42, 197.85, 161.17, 80.70, 109.45, 148.27, 146.60, 182.44, 104.04, 199.49, 155.63, 152.97, 88.51, 133.06, 195.69, 148.72, 0.00, 87.66, 90.68, 165.84, 173.49, 130.04, 96.80, 154.06, 137.24, 81.03, 171.81, 162.46, 101.76},
            {172.55, 191.05, 157.16, 104.48, 178.46, 130.83, 110.67, 174.87, 196.93, 96.33, 191.93, 101.52, 127.75, 96.52, 174.48, 104.08, 149.67, 87.66, 0.00, 138.91, 186.47, 165.45, 125.06, 147.36, 142.59, 195.58, 128.19, 111.00, 127.94, 124.66},
            {95.18, 194.86, 168.54, 120.92, 197.18, 135.29, 167.22, 164.63, 89.28, 146.08, 110.29, 176.91, 181.43, 149.38, 183.73, 90.59, 90.68, 90.68, 138.91, 0.00, 153.40, 175.10, 173.93, 199.97, 109.68, 159.23, 151.71, 100.69, 92.54, 191.27},
            {107.95, 149.14, 82.61, 174.41, 128.62, 103.94, 135.86, 89.27, 85.47, 192.86, 90.96, 111.79, 177.85, 119.14, 152.24, 115.03, 110.72, 165.84, 186.47, 153.40, 0.00, 148.50, 162.71, 92.82, 167.45, 185.25, 86.31, 170.68, 108.10, 190.04},
            {123.46, 196.53, 92.00, 92.46, 148.41, 108.14, 82.05, 138.11, 175.50, 172.85, 142.84, 105.31, 125.83, 192.31, 152.47, 163.13, 166.20, 173.49, 165.45, 175.10, 148.50, 0.00, 172.11, 85.67, 145.70, 108.47, 124.49, 183.20, 113.28, 113.44},
            {132.34, 166.86, 124.42, 154.55, 99.71, 153.35, 141.70, 187.47, 107.41, 187.82, 90.07, 112.50, 160.55, 119.22, 154.59, 158.58, 143.71, 130.04, 125.06, 173.93, 162.71, 172.11, 0.00, 199.84, 199.85, 175.54, 150.62, 198.43, 86.65, 144.22},
            {163.28, 139.23, 162.37, 97.43, 165.94, 171.44, 97.46, 124.36, 148.86, 172.07, 192.73, 126.33, 131.78, 141.60, 100.64, 90.46, 92.26, 96.80, 147.36, 199.97, 92.82, 85.67, 199.84, 0.00, 124.68, 104.52, 199.46, 80.84, 173.07, 148.05},
            {131.91, 111.90, 141.11, 176.06, 108.00, 143.23, 120.51, 82.35, 147.96, 104.10, 101.13, 107.69, 171.45, 191.15, 191.48, 167.19, 149.80, 154.06, 142.59, 109.68, 167.45, 145.70, 199.85, 124.68, 0.00, 189.34, 156.76, 89.92, 134.50, 163.73},
            {150.39, 92.35, 98.81, 184.86, 124.03, 126.44, 82.54, 140.93, 85.99, 99.21, 181.16, 195.01, 170.84, 126.60, 180.07, 142.83, 107.78, 137.24, 195.58, 159.23, 185.25, 108.47, 175.54, 104.52, 189.34, 0.00, 189.54, 92.13, 146.10, 140.19},
            {115.21, 115.99, 89.90, 165.92, 169.25, 80.83, 171.72, 193.40, 80.03, 172.64, 157.85, 93.74, 113.23, 152.32, 98.00, 152.01, 191.68, 81.03, 128.19, 151.71, 86.31, 124.49, 150.62, 199.46, 156.76, 189.54, 0.00, 168.83, 123.03, 197.91},
            {109.00, 125.19, 88.47, 168.89, 184.59, 125.83, 94.34, 127.61, 105.86, 92.05, 166.57, 100.07, 80.32, 113.76, 179.51, 189.55, 137.38, 171.81, 111.00, 100.69, 170.68, 183.20, 198.43, 80.84, 89.92, 92.13, 168.83, 0.00, 159.99, 141.83},
            {189.67, 164.30, 176.94, 87.44, 152.47, 177.67, 199.50, 156.79, 173.54, 104.95, 174.35, 131.80, 177.13, 138.60, 159.56, 177.94, 189.53, 162.46, 127.94, 92.54, 108.10, 113.28, 86.65, 173.07, 134.50, 146.10, 123.03, 159.99, 0.00, 125.96},
            {115.16, 178.01, 176.20, 186.68, 148.44, 136.79, 120.63, 102.69, 95.64, 188.13, 181.45, 103.12, 179.90, 152.93, 131.17, 171.23, 111.44, 101.76, 124.66, 191.27, 190.04, 113.44, 144.22, 148.05, 163.73, 140.19, 197.91, 141.83, 125.96, 0.00},
    };
    public static final double φp = 0.3;  //本例中都取0.2是会得到性质7疯狂降阶的情况，然后通过性质4直接得到了最优解
    public static final double φc = 0.3;
    public static double P;
    public static double C;

    public static void main(String[] args) {
        preHandle();
    }

    public static void preHandle() {
        DecimalFormat decimalFormat = new DecimalFormat("#.00");
        P = Arrays.stream(pi).reduce(0.0, Double::sum) * φp;
        C = Arrays.stream(ci).reduce(0.0, Double::sum) * φc;
        P = Double.parseDouble(decimalFormat.format(P));
        C = Double.parseDouble(decimalFormat.format(C));
        System.out.println("P = " + P);
        System.out.println("C = " + C);
        for (int i = 0; i < pi.length; i++) {
            V.add(new Facility(i + 1, ci[i], pi[i], pi[i] / ci[i]));
        }
    }
}
