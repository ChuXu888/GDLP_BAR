package com.chuxu.BackTrackingAlgorithmWithReduction.part01_preHandleData.RandomCase;

import com.chuxu.entity.Facility;

import java.text.DecimalFormat;
import java.util.Arrays;
import java.util.LinkedHashSet;

public class N32_4 {
    public static int dimension = 32;
    public static final double[] ci =
            {1199.0, 560.0, 1058.0, 783.0, 327.0, 1118.0, 673.0, 574.0, 896.0, 1010.0, 750.0, 477.0, 303.0, 362.0, 818.0, 206.0, 542.0, 502.0, 851.0, 1153.0, 271.0, 1170.0, 337.0, 445.0, 1189.0, 995.0, 828.0, 588.0, 736.0, 1079.0, 569.0, 497.0};
    public static final double[] pi =
            {423.0, 595.0, 405.0, 547.0, 647.0, 587.0, 1075.0, 1182.0, 1197.0, 682.0, 465.0, 321.0, 502.0, 662.0, 758.0, 716.0, 297.0, 330.0, 1001.0, 939.0, 528.0, 954.0, 1101.0, 835.0, 678.0, 925.0, 815.0, 587.0, 353.0, 394.0, 566.0, 756.0};
    public static final LinkedHashSet<Facility> V = new LinkedHashSet<>();
    public static double[][] disMatrix = {
            {0.00, 145.93, 141.83, 159.75, 150.05, 170.68, 96.90, 164.33, 82.71, 181.93, 183.30, 125.41, 89.38, 140.77, 169.95, 152.64, 195.84, 88.19, 184.54, 152.69, 186.10, 104.39, 129.54, 166.13, 98.15, 182.20, 190.90, 117.11, 147.65, 130.39, 103.78, 136.22},
            {145.93, 0.00, 88.19, 175.40, 189.57, 112.04, 144.48, 157.34, 113.20, 115.87, 105.60, 156.82, 147.11, 186.54, 100.27, 163.44, 150.42, 178.82, 194.79, 85.35, 196.96, 168.85, 136.51, 80.97, 95.08, 114.00, 191.73, 149.91, 175.10, 82.20, 176.75, 149.52},
            {141.83, 88.19, 0.00, 117.08, 156.99, 134.48, 186.78, 131.61, 129.86, 105.99, 152.20, 91.07, 190.23, 167.90, 93.22, 116.25, 95.91, 110.80, 88.99, 175.13, 153.58, 182.96, 86.68, 86.03, 198.55, 135.48, 191.57, 176.57, 117.14, 181.22, 168.73, 92.55},
            {159.75, 175.40, 117.08, 0.00, 182.77, 179.89, 133.75, 157.98, 177.84, 104.77, 103.08, 97.39, 188.95, 194.28, 81.74, 86.31, 131.72, 182.36, 166.66, 113.19, 124.11, 156.66, 138.53, 198.08, 103.45, 111.90, 83.30, 198.68, 172.68, 108.18, 166.49, 183.58},
            {150.05, 189.57, 156.99, 182.77, 0.00, 104.91, 110.05, 178.94, 105.39, 193.33, 191.95, 82.59, 123.18, 124.53, 169.18, 187.71, 84.17, 98.73, 170.85, 150.20, 138.53, 99.07, 132.33, 168.19, 189.43, 104.80, 89.62, 101.95, 191.81, 109.61, 106.41, 98.86},
            {170.68, 112.04, 134.48, 179.89, 104.91, 0.00, 129.06, 126.35, 177.01, 157.74, 175.80, 93.45, 164.48, 152.15, 177.96, 145.67, 153.04, 192.05, 107.96, 193.59, 117.12, 196.20, 103.33, 170.87, 177.28, 174.95, 151.28, 137.64, 163.74, 103.56, 159.42, 110.69},
            {96.90, 144.48, 186.78, 133.75, 110.05, 129.06, 0.00, 183.29, 120.86, 95.00, 147.66, 144.11, 196.16, 199.89, 162.45, 134.81, 89.43, 118.15, 152.95, 180.62, 105.53, 185.76, 179.94, 169.18, 92.55, 128.80, 107.17, 131.74, 117.80, 116.80, 117.86, 103.49},
            {164.33, 157.34, 131.61, 157.98, 178.94, 126.35, 183.29, 0.00, 151.96, 162.13, 161.80, 107.11, 102.39, 84.38, 199.63, 88.82, 181.49, 150.10, 197.48, 124.85, 153.86, 93.86, 85.20, 148.10, 118.24, 165.90, 165.03, 141.40, 145.96, 174.24, 185.71, 83.09},
            {82.71, 113.20, 129.86, 177.84, 105.39, 177.01, 120.86, 151.96, 0.00, 156.86, 116.02, 197.81, 154.47, 107.26, 123.34, 141.55, 185.93, 131.22, 162.83, 87.22, 109.52, 117.35, 186.22, 190.65, 100.67, 117.62, 190.92, 142.99, 90.24, 133.16, 154.95, 143.70},
            {181.93, 115.87, 105.99, 104.77, 193.33, 157.74, 95.00, 162.13, 156.86, 0.00, 170.33, 163.82, 139.81, 89.97, 103.55, 184.20, 167.70, 193.00, 154.91, 198.03, 176.34, 123.25, 119.50, 86.41, 155.01, 131.70, 195.85, 122.16, 189.41, 113.14, 96.62, 133.36},
            {183.30, 105.60, 152.20, 103.08, 191.95, 175.80, 147.66, 161.80, 116.02, 170.33, 0.00, 191.35, 190.04, 172.35, 123.55, 160.28, 181.95, 113.15, 174.48, 199.84, 125.50, 105.13, 189.24, 111.21, 144.06, 154.62, 159.10, 128.14, 193.36, 92.97, 117.30, 165.57},
            {125.41, 156.82, 91.07, 97.39, 82.59, 93.45, 144.11, 107.11, 197.81, 163.82, 191.35, 0.00, 131.25, 98.24, 95.91, 183.44, 94.53, 97.55, 149.09, 82.30, 194.72, 104.62, 166.74, 144.59, 187.37, 162.16, 96.96, 177.61, 185.80, 97.20, 84.14, 159.26},
            {89.38, 147.11, 190.23, 188.95, 123.18, 164.48, 196.16, 102.39, 154.47, 139.81, 190.04, 131.25, 0.00, 160.16, 119.53, 151.41, 177.12, 166.89, 159.98, 171.76, 184.17, 110.90, 154.47, 102.07, 131.18, 194.38, 113.87, 196.91, 176.29, 131.30, 136.62, 96.62},
            {140.77, 186.54, 167.90, 194.28, 124.53, 152.15, 199.89, 84.38, 107.26, 89.97, 172.35, 98.24, 160.16, 0.00, 116.42, 145.30, 162.26, 174.41, 173.02, 161.57, 108.93, 91.91, 156.57, 169.46, 86.22, 191.03, 149.34, 112.77, 147.22, 101.49, 145.43, 98.66},
            {169.95, 100.27, 93.22, 81.74, 169.18, 177.96, 162.45, 199.63, 123.34, 103.55, 123.55, 95.91, 119.53, 116.42, 0.00, 139.77, 169.71, 169.82, 163.37, 116.29, 133.78, 184.91, 134.83, 105.77, 162.71, 183.53, 86.84, 118.15, 185.10, 101.34, 128.75, 82.85},
            {152.64, 163.44, 116.25, 86.31, 187.71, 145.67, 134.81, 88.82, 141.55, 184.20, 160.28, 183.44, 151.41, 145.30, 139.77, 0.00, 113.05, 159.86, 96.97, 177.77, 81.75, 172.68, 191.09, 123.77, 93.30, 93.01, 87.54, 141.79, 195.38, 89.92, 127.46, 195.92},
            {195.84, 150.42, 95.91, 131.72, 84.17, 153.04, 89.43, 181.49, 185.93, 167.70, 181.95, 94.53, 177.12, 162.26, 169.71, 113.05, 0.00, 141.10, 153.42, 173.20, 195.70, 125.89, 165.44, 139.21, 164.06, 160.48, 93.87, 188.12, 155.03, 156.04, 191.38, 101.75},
            {88.19, 178.82, 110.80, 182.36, 98.73, 192.05, 118.15, 150.10, 131.22, 193.00, 113.15, 97.55, 166.89, 174.41, 169.82, 159.86, 141.10, 0.00, 126.20, 148.31, 168.30, 149.35, 155.79, 112.00, 140.89, 161.96, 142.66, 195.02, 91.34, 121.34, 119.94, 134.07},
            {184.54, 194.79, 88.99, 166.66, 170.85, 107.96, 152.95, 197.48, 162.83, 154.91, 174.48, 149.09, 159.98, 173.02, 163.37, 96.97, 153.42, 126.20, 0.00, 95.45, 146.62, 109.15, 98.85, 156.53, 108.56, 81.11, 91.76, 170.95, 103.38, 194.07, 142.89, 141.10},
            {152.69, 85.35, 175.13, 113.19, 150.20, 193.59, 180.62, 124.85, 87.22, 198.03, 199.84, 82.30, 171.76, 161.57, 116.29, 177.77, 173.20, 148.31, 95.45, 0.00, 152.81, 126.13, 167.55, 165.70, 126.08, 130.66, 173.98, 175.42, 122.04, 177.87, 123.36, 123.26},
            {186.10, 196.96, 153.58, 124.11, 138.53, 117.12, 105.53, 153.86, 109.52, 176.34, 125.50, 194.72, 184.17, 108.93, 133.78, 81.75, 195.70, 168.30, 146.62, 152.81, 0.00, 166.19, 124.36, 152.90, 104.93, 147.26, 114.81, 194.13, 153.05, 81.98, 165.94, 94.90},
            {104.39, 168.85, 182.96, 156.66, 99.07, 196.20, 185.76, 93.86, 117.35, 123.25, 105.13, 104.62, 110.90, 91.91, 184.91, 172.68, 125.89, 149.35, 109.15, 126.13, 166.19, 0.00, 142.71, 174.41, 152.81, 102.63, 161.76, 87.20, 90.84, 109.82, 120.46, 127.80},
            {129.54, 136.51, 86.68, 138.53, 132.33, 103.33, 179.94, 85.20, 186.22, 119.50, 189.24, 166.74, 154.47, 156.57, 134.83, 191.09, 165.44, 155.79, 98.85, 167.55, 124.36, 142.71, 0.00, 124.60, 159.77, 178.49, 110.96, 115.11, 81.13, 196.01, 171.90, 162.39},
            {166.13, 80.97, 86.03, 198.08, 168.19, 170.87, 169.18, 148.10, 190.65, 86.41, 111.21, 144.59, 102.07, 169.46, 105.77, 123.77, 139.21, 112.00, 156.53, 165.70, 152.90, 174.41, 124.60, 0.00, 164.58, 186.56, 90.61, 168.58, 112.93, 145.25, 108.14, 159.10},
            {98.15, 95.08, 198.55, 103.45, 189.43, 177.28, 92.55, 118.24, 100.67, 155.01, 144.06, 187.37, 131.18, 86.22, 162.71, 93.30, 164.06, 140.89, 108.56, 126.08, 104.93, 152.81, 159.77, 164.58, 0.00, 128.12, 85.05, 129.21, 95.55, 144.29, 156.45, 93.55},
            {182.20, 114.00, 135.48, 111.90, 104.80, 174.95, 128.80, 165.90, 117.62, 131.70, 154.62, 162.16, 194.38, 191.03, 183.53, 93.01, 160.48, 161.96, 81.11, 130.66, 147.26, 102.63, 178.49, 186.56, 128.12, 0.00, 93.69, 155.49, 192.96, 199.39, 183.59, 160.05},
            {190.90, 191.73, 191.57, 83.30, 89.62, 151.28, 107.17, 165.03, 190.92, 195.85, 159.10, 96.96, 113.87, 149.34, 86.84, 87.54, 93.87, 142.66, 91.76, 173.98, 114.81, 161.76, 110.96, 90.61, 85.05, 93.69, 0.00, 195.00, 97.79, 96.07, 90.27, 98.99},
            {117.11, 149.91, 176.57, 198.68, 101.95, 137.64, 131.74, 141.40, 142.99, 122.16, 128.14, 177.61, 196.91, 112.77, 118.15, 141.79, 188.12, 195.02, 170.95, 175.42, 194.13, 87.20, 115.11, 168.58, 129.21, 155.49, 195.00, 0.00, 185.34, 190.92, 177.35, 196.49},
            {147.65, 175.10, 117.14, 172.68, 191.81, 163.74, 117.80, 145.96, 90.24, 189.41, 193.36, 185.80, 176.29, 147.22, 185.10, 195.38, 155.03, 91.34, 103.38, 122.04, 153.05, 90.84, 81.13, 112.93, 95.55, 192.96, 97.79, 185.34, 0.00, 105.43, 116.98, 155.41},
            {130.39, 82.20, 181.22, 108.18, 109.61, 103.56, 116.80, 174.24, 133.16, 113.14, 92.97, 97.20, 131.30, 101.49, 101.34, 89.92, 156.04, 121.34, 194.07, 177.87, 81.98, 109.82, 196.01, 145.25, 144.29, 199.39, 96.07, 190.92, 105.43, 0.00, 169.83, 124.53},
            {103.78, 176.75, 168.73, 166.49, 106.41, 159.42, 117.86, 185.71, 154.95, 96.62, 117.30, 84.14, 136.62, 145.43, 128.75, 127.46, 191.38, 119.94, 142.89, 123.36, 165.94, 120.46, 171.90, 108.14, 156.45, 183.59, 90.27, 177.35, 116.98, 169.83, 0.00, 112.71},
            {136.22, 149.52, 92.55, 183.58, 98.86, 110.69, 103.49, 83.09, 143.70, 133.36, 165.57, 159.26, 96.62, 98.66, 82.85, 195.92, 101.75, 134.07, 141.10, 123.26, 94.90, 127.80, 162.39, 159.10, 93.55, 160.05, 98.99, 196.49, 155.41, 124.53, 112.71, 0.00},
    };
    public static final double φp = 0.3;  //本例中都取0.2是会得到性质7疯狂降阶的情况，然后通过性质4直接得到了最优解
    public static final double φc = 0.3;
    public static double P;
    public static double C;

    public static void main(String[] args) {
        preHandle();
    }

    public static void preHandle() {
        DecimalFormat decimalFormat = new DecimalFormat("#.00");
        P = Arrays.stream(pi).reduce(0.0, Double::sum) * φp;
        C = Arrays.stream(ci).reduce(0.0, Double::sum) * φc;
        P = Double.parseDouble(decimalFormat.format(P));
        C = Double.parseDouble(decimalFormat.format(C));
        System.out.println("P = " + P);
        System.out.println("C = " + C);
        for (int i = 0; i < pi.length; i++) {
            V.add(new Facility(i + 1, ci[i], pi[i], pi[i] / ci[i]));
        }
    }
}
